<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="W_WORKING_PROCESSES" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    <result column="ID" property="id" jdbcType="DECIMAL" />
    <result column="TITLE" property="title" jdbcType="VARCHAR" />
    <result column="CONTENT" property="content" jdbcType="VARCHAR" />
    <result column="ESTIMATE_DATE" property="estimateDate" jdbcType="TIMESTAMP" />
    <result column="ACTUAL_DATE" property="actualDate" jdbcType="TIMESTAMP" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ASSESS" property="assess" jdbcType="VARCHAR" />
    <result column="CREATED_BY" property="createdBy" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
    <result column="MODIFIED_BY" property="modifiedBy" jdbcType="VARCHAR" />
    <result column="MODIFY_DATE" property="modifyDate" jdbcType="TIMESTAMP" />
    <result column="ID_WORKS" property="idWorks" jdbcType="DECIMAL" />
    <result column="CREATED_BY_TCP_IP" property="createdByTcpIp" jdbcType="VARCHAR" />
    <result column="MODIFIED_BY_TCP_IP" property="modifiedByTcpIp" jdbcType="VARCHAR" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    select ID, TITLE, CONTENT, ESTIMATE_DATE, ACTUAL_DATE, REMARK, ASSESS, CREATED_BY, CREATE_DATE,
      MODIFIED_BY, MODIFY_DATE, ID_WORKS, CREATED_BY_TCP_IP, MODIFIED_BY_TCP_IP
    from W_WORKING_PROCESSES
    where ID = #id:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    delete from W_WORKING_PROCESSES
    where ID = #id:DECIMAL#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    insert into W_WORKING_PROCESSES (TITLE, CONTENT, ESTIMATE_DATE, ACTUAL_DATE, REMARK, ASSESS,
       CREATE_DATE, ID_WORKS, CREATED_BY_TCP_IP,
      MODIFIED_BY_TCP_IP,CREATED_BY)
    values (#title:VARCHAR#, #content:VARCHAR#, #estimateDate:TIMESTAMP#, #actualDate:TIMESTAMP#,
      #remark:VARCHAR#, #assess:VARCHAR#, SYSDATE,
      #idWorks:DECIMAL#, #createdByTcpIp:VARCHAR#,#modifiedByTcpIp:VARCHAR#,#createdBy:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    insert into W_WORKING_PROCESSES
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        ID
      </isNotNull>
      <isNotNull prepend="," property="content" >
        CONTENT
      </isNotNull>
      <isNotNull prepend="," property="estimateDate" >
        ESTIMATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="actualDate" >
        ACTUAL_DATE
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK
      </isNotNull>
      <isNotNull prepend="," property="assess" >
        ASSESS
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        CREATED_BY
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy" >
        MODIFIED_BY
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE
      </isNotNull>
      <isNotNull prepend="," property="idWorks" >
        ID_WORKS
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp" >
        CREATED_BY_TCP_IP
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp" >
        MODIFIED_BY_TCP_IP
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        #id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="content" >
        #content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="estimateDate" >
        #estimateDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="actualDate" >
        #actualDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="assess" >
        #assess:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy" >
        #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="idWorks" >
        #idWorks:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp" >
        #createdByTcpIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp" >
        #modifiedByTcpIp:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    update W_WORKING_PROCESSES
    <dynamic prepend="set" >
      <isNotNull prepend="," property="content" >
        CONTENT = #content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="estimateDate" >
        ESTIMATE_DATE = #estimateDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="actualDate" >
        ACTUAL_DATE = #actualDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="assess" >
        ASSESS = #assess:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        CREATED_BY = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy" >
        MODIFIED_BY = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="idWorks" >
        ID_WORKS = #idWorks:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp" >
        CREATED_BY_TCP_IP = #createdByTcpIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp" >
        MODIFIED_BY_TCP_IP = #modifiedByTcpIp:VARCHAR#
      </isNotNull>
    </dynamic>
    where ID = #id:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vo.W_WORKING_PROCESSES" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 31 14:06:37 ICT 2012.
    -->
    update W_WORKING_PROCESSES
    set 
      TITLE = #title:VARCHAR#,
      CONTENT = #content:VARCHAR#,
      ESTIMATE_DATE = #estimateDate:TIMESTAMP#,
      ACTUAL_DATE = #actualDate:TIMESTAMP#,
      REMARK = #remark:VARCHAR#,
      ASSESS = #assess:VARCHAR#,
      MODIFY_DATE = SYSDATE,
      ID_WORKS = #idWorks:DECIMAL#,
      CREATED_BY_TCP_IP = #createdByTcpIp:VARCHAR#,
      MODIFIED_BY_TCP_IP = #modifiedByTcpIp:VARCHAR#,
      MODIFIED_BY = #modifiedBy:VARCHAR#
    where ID = #id:DECIMAL#
  </update>
  
  <select id="filter" parameterClass="vo.W_WORKING_PROCESSES" resultMap="ibatorgenerated_BaseResultMap">
    select *
    from ( select a.*, rownum r
	    from (
			select ID, TITLE, CONTENT, ESTIMATE_DATE, ACTUAL_DATE, REMARK, ASSESS, CREATED_BY, CREATE_DATE,
		      MODIFIED_BY, MODIFY_DATE, ID_WORKS, CREATED_BY_TCP_IP, MODIFIED_BY_TCP_IP
		    from W_WORKING_PROCESSES
		    <dynamic prepend="where">
		    <isNotNull prepend="and" property="idWorks">
		        ID_WORKS = #idWorks:DECIMAL#
		      </isNotNull>
		      <isNotEmpty prepend="and" property="content">
		        UPPER(CONTENT) like '%' || UPPER(#content:VARCHAR#) || '%'
		      </isNotEmpty>
		      <isNotEmpty prepend="and" property="assess">
		        UPPER(ASSESS) like '%' || UPPER(#assess:VARCHAR#) || '%'
		      </isNotEmpty>
		    </dynamic>
		    order by ID
		) a
		where rownum <![CDATA[ <= ]]> #endRecord# )
	where r &gt; #startRecord#
  </select>
  

  <select id="getWorkingProcessesListByIdWorks" parameterClass="java.lang.Integer" resultMap="ibatorgenerated_BaseResultMap">
			select * from W_WORKING_PROCESSES 
		    <dynamic prepend="where">
		    	ID_WORKS = #idWorkTypes:DECIMAL# 
		    </dynamic>
		   ORDER BY CREATE_DATE
  </select>
  
  <parameterMap id="parameterfilter" class="java.util.Map">
  	<parameter property="title" />
    <parameter property="assess" />
    <parameter property="idWorkTypes" />
  	<parameter property="column" />
    <parameter property="order" />
  </parameterMap>
  <select id="getWorkingProcessesListFilter" parameterMap="parameterfilter" resultMap="ibatorgenerated_BaseResultMap">
			select * from W_WORKING_PROCESSES 
		    <dynamic prepend="where">
		    	ID_WORKS = #idWorkTypes:DECIMAL# 
		    	<isNotEmpty property="title">
		        AND UPPER(TITLE) like '%' || UPPER(#title:VARCHAR#) || '%' 
		      	</isNotEmpty>
		      	<isNotEmpty property="assess">
		        AND UPPER(ASSESS) like '%' || UPPER(#assess:VARCHAR#) || '%' 
		      	</isNotEmpty>		      	
		    </dynamic>
		   ORDER BY $column$ $order$
  </select>
  
  <select id="countRow" parameterClass="vo.W_WORKING_PROCESSES" resultClass="Integer">
    select count(*) from W_WORKING_PROCESSES
		  <dynamic prepend="where">
		  <isNotNull prepend="and" property="idWorks">
		        ID_WORKS = #idWorks:DECIMAL#
		      </isNotNull>
		  	<isNotEmpty prepend="and" property="content">
		        UPPER(CONTENT) like '%' || UPPER(#content:VARCHAR#) || '%'
		      </isNotEmpty>
		      <isNotEmpty prepend="and" property="assess">
		        UPPER(ASSESS) like '%' || UPPER(#assess:VARCHAR#) || '%'
		      </isNotEmpty>
		    </dynamic>
  </select>
  
  <resultMap class="vo.W_WORKING_PROCESSES" id="idWorksList">
    <result column="ID" property="id" jdbcType="DECIMAL" />
  </resultMap>
<select id="idWorkingProcesses" parameterClass="java.lang.String" resultMap="idWorksList">
	SELECT ID FROM W_WORKING_PROCESSES
	<dynamic prepend="where">
		        ID_WORKS = #idWorks:VARCHAR#
	</dynamic>
</select>

<select id="baoCaoTienDo" parameterClass="java.lang.String" resultMap="ibatorgenerated_BaseResultMap">
	SELECT * FROM W_WORKING_PROCESSES
	<dynamic prepend="where">
		        ID_WORKS = #idWorks:VARCHAR# AND CREATE_DATE = (SELECT MAX(CREATE_DATE) FROM W_WORKING_PROCESSES WHERE ID_WORKS = #idWorks:VARCHAR# )
	</dynamic>
</select>

</sqlMap>