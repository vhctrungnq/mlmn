<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="V_RP_DY_IPBB_CPU_MEM">
  <resultMap class="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbCpuMem" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 25 15:44:20 ICT 2013.
    -->
    <result column="DAY" jdbcType="TIMESTAMP" property="day" />
    <result column="LINK" jdbcType="VARCHAR" property="link" />
    <result column="CPU_TOTAL" jdbcType="DECIMAL" property="cpuTotal" />
    <result column="DOWTIME_CPU" jdbcType="DECIMAL" property="dowtimeCpu" />
    <result column="COVERAGE_CPU" jdbcType="DECIMAL" property="coverageCpu" />
    <result column="AVAIL_MEM_1_PROCESSOR" jdbcType="DECIMAL" property="availMem1Processor" />
    <result column="PER_AVAIL_MEM_1_PROCESSOR" jdbcType="DECIMAL" property="perAvailMem1Processor" />
    <result column="DOWTIME_MEM" jdbcType="DECIMAL" property="dowtimeMem" />
    <result column="COVERAGE_MEM" jdbcType="DECIMAL" property="coverageMem" />
  </resultMap>
  
  <resultMap class="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbCpuMem" id="ibatorgenerated_BaseResultMap_hr">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 25 15:44:20 ICT 2013.
    -->
    <result column="DATETIME" jdbcType="TIMESTAMP" property="day" />
    <result column="LINK" jdbcType="VARCHAR" property="link" />
    <result column="CPU_TOTAL" jdbcType="DECIMAL" property="cpuTotal" />
    <result column="DOWTIME_CPU" jdbcType="DECIMAL" property="dowtimeCpu" />
    <result column="COVERAGE_CPU" jdbcType="DECIMAL" property="coverageCpu" />
    <result column="AVAIL_MEM_1_PROCESSOR" jdbcType="DECIMAL" property="availMem1Processor" />
    <result column="PER_AVAIL_MEM_1_PROCESSOR" jdbcType="DECIMAL" property="perAvailMem1Processor" />
    <result column="DOWTIME_MEM" jdbcType="DECIMAL" property="dowtimeMem" />
    <result column="COVERAGE_MEM" jdbcType="DECIMAL" property="coverageMem" />
  </resultMap>
  
  <resultMap class="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbCpuMem" id="ibatorgenerated_BaseResultMap_link">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 25 15:44:20 ICT 2013.
    -->
     
    <result column="LINK" jdbcType="VARCHAR" property="link" />
     
  </resultMap>
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbCpuMem">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 25 15:44:20 ICT 2013.
    -->
    insert into V_RP_DY_IPBB_CPU_MEM (DAY, LINK, CPU_OF_ROUTING_PROCESSOR_7,
      CPU_OF_SWITCHING_PROCESSOR_7, CPU_TOTAL, DOWTIME_CPU, COVERAGE_CPU, AVAIL_MEM_1_PROCESSOR,
      PER_AVAIL_MEM_1_PROCESSOR, AVAIL_MEM_2_IO, PER_AVAIL_MEM_2_IO, DOWTIME_MEM, COVERAGE_MEM)
    values (#day:TIMESTAMP#, #link:VARCHAR#, #cpuOfRoutingProcessor7:DECIMAL#,
      #cpuOfSwitchingProcessor7:DECIMAL#, #cpuTotal:DECIMAL#, #dowtimeCpu:DECIMAL#,
      #coverageCpu:DECIMAL#, #availMem1Processor:DECIMAL#, #perAvailMem1Processor:DECIMAL#,
      #availMem2Io:DECIMAL#, #perAvailMem2Io:DECIMAL#, #dowtimeMem:DECIMAL#, #coverageMem:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbCpuMem">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 25 15:44:20 ICT 2013.
    -->
    insert into V_RP_DY_IPBB_CPU_MEM
    <dynamic prepend="(">
      <isNotNull prepend="," property="day">
        DAY
      </isNotNull>
      <isNotNull prepend="," property="link">
        LINK
      </isNotNull>
      <isNotNull prepend="," property="cpuOfRoutingProcessor7">
        CPU_OF_ROUTING_PROCESSOR_7
      </isNotNull>
      <isNotNull prepend="," property="cpuOfSwitchingProcessor7">
        CPU_OF_SWITCHING_PROCESSOR_7
      </isNotNull>
      <isNotNull prepend="," property="cpuTotal">
        CPU_TOTAL
      </isNotNull>
      <isNotNull prepend="," property="dowtimeCpu">
        DOWTIME_CPU
      </isNotNull>
      <isNotNull prepend="," property="coverageCpu">
        COVERAGE_CPU
      </isNotNull>
      <isNotNull prepend="," property="availMem1Processor">
        AVAIL_MEM_1_PROCESSOR
      </isNotNull>
      <isNotNull prepend="," property="perAvailMem1Processor">
        PER_AVAIL_MEM_1_PROCESSOR
      </isNotNull>
      <isNotNull prepend="," property="availMem2Io">
        AVAIL_MEM_2_IO
      </isNotNull>
      <isNotNull prepend="," property="perAvailMem2Io">
        PER_AVAIL_MEM_2_IO
      </isNotNull>
      <isNotNull prepend="," property="dowtimeMem">
        DOWTIME_MEM
      </isNotNull>
      <isNotNull prepend="," property="coverageMem">
        COVERAGE_MEM
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="day">
        #day:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="link">
        #link:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cpuOfRoutingProcessor7">
        #cpuOfRoutingProcessor7:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="cpuOfSwitchingProcessor7">
        #cpuOfSwitchingProcessor7:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="cpuTotal">
        #cpuTotal:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="dowtimeCpu">
        #dowtimeCpu:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="coverageCpu">
        #coverageCpu:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="availMem1Processor">
        #availMem1Processor:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="perAvailMem1Processor">
        #perAvailMem1Processor:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="availMem2Io">
        #availMem2Io:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="perAvailMem2Io">
        #perAvailMem2Io:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="dowtimeMem">
        #dowtimeMem:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="coverageMem">
        #coverageMem:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <procedure id="filterDaily" resultMap="ibatorgenerated_BaseResultMap">
		{
			call PK_RP_IPBB.pr_filter
			(
				#P_TABLE_NAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_LINKID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_START_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_END_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
			)
		}
  </procedure>
   <procedure id="filterHourly" resultMap="ibatorgenerated_BaseResultMap_hr">
		{
			call PK_RP_IPBB.pr_filter
			(
				#P_TABLE_NAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_LINKID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_START_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_END_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
			)
		}
  </procedure>
  
   <parameterMap id="getLinkList" class="java.util.Map">
    <parameter property="startDate"/>
    <parameter property="endDate"/> 
  </parameterMap>
  <select id="getLinkList" resultMap="ibatorgenerated_BaseResultMap_link" parameterMap="getLinkList">
    select distinct link from V_RP_DY_IPBB_CPU_MEM
    <dynamic prepend="where" >
      <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty> 
    </dynamic>
    order by link asc
    </select>
</sqlMap>