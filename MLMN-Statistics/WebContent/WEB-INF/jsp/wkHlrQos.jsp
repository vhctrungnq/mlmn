<%@ include file="/commons/taglibs.jsp" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<title>Hlr Weekly Report</title>
<content tag="heading">HLR WEEKLY REPORT</content>
<ul class="ui-tabs-nav">
  <li class=""><a href="${pageContext.request.contextPath}/report/core/hlr/hr.htm?hlrid=${hlr.hlrid}"><span>Báo cáo giờ</span></a></li>
  <li class=""><a href="${pageContext.request.contextPath}/report/core/hlr/dy.htm?hlrid=${hlr.hlrid}"><span>Báo cáo ngày</span></a></li>
  <li class="ui-tabs-selected"><a href="${pageContext.request.contextPath}/report/core/hlr/wk.htm?hlrid=${hlr.hlrid}"><span>Báo cáo tuần</span></a></li>
  <li class=""><a href="${pageContext.request.contextPath}/report/core/hlr/mn.htm?hlrid=${hlr.hlrid}"><span>Báo cáo tháng</span></a></li>
</ul> 
<div class="ui-tabs-panel">

	<form method="get" action="wk.htm">
		<table width="100%" class="form">
			<tr>
			    <td align="left">
					HLR <input name="hlrid" id="hlrid" value="${hlr.hlrid}" size="10">
	                Tuần <input value="${week}" name="week" id="week" size="2" maxlength="2"/>
					<img alt="calendar" title="Click to choose the week number" id="chooseWeek" style="cursor: pointer;" src="${pageContext.request.contextPath}/images/calendar.png"/>
	                Năm <input value="${year}" name="year" id="year" size="4" maxlength="4"/>
	                &nbsp;&nbsp;<input type="submit" class="button" name="submit" value="View Report"/>
	            </td>
	        </tr>		
		</table>
	</form>
	<br/>
	
	<table>
		<tr>
	    	<td width="25%" valign="top"/>
			<td valign="top">
				<div id="notaccordion" style="width: 800px; margin: 0 auto">
					<h3><a href="#" name="authen">Authentication</a></h3>
					<div>
					    <table class="simple2">
					        <tr>
					            <td>Number of authentication data requests in Input - Output Subsystem (IOS) queue</td>
					            <td>${wkHlrAuthenQos.f1} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication parameters received from AUC-IOS.</td>
					            <td>${wkHlrAuthenQos.f2} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication parameters sent to VLR or SGSN</td>
					            <td>${wkHlrAuthenQos.f3}</td>
					        </tr>
					        <tr>
					            <td>Number of times authentication parameters have been reused</td>
					            <td>${wkHlrAuthenQos.f4} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication data requests in Mobile Application Part (MAP) queue</td>
					            <td>${wkHlrAuthenQos.f5} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication parameters received from AUC-MAP</td>
					            <td>${wkHlrAuthenQos.f6}</td>
					        </tr>
					        <tr>
					            <td>Number of triplets generated by AUC</td>
					            <td>${wkHlrAuthenQos.f7}</td>
					        </tr>
					        <tr>
					            <td>Number of failed requests due to IMSI not found in AUC</td>
					            <td>${wkHlrAuthenQos.f8} </td>
					        </tr>
					        <tr>
					            <td>Number of synchronisation failures received from VLR or SGSN</td>
					            <td>${wkHlrAuthenQos.f9} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication data request messages returning GSM authentication vectors</td>
					            <td>${wkHlrAuthenQos.f10} </td>
					        </tr>
					        <tr>
					            <td>Number of authentication data request messages returning UMTS authentication vectors</td>
					            <td>${wkHlrAuthenQos.f11} </td>
					        </tr>
					        <tr>
					            <td>Number of quintets generated by AUC</td>
					            <td>${wkHlrAuthenQos.f12} </td>
					        </tr>
					        <tr>
					            <td>Number of synchronization failures received in AUC.</td>
					            <td>${wkHlrAuthenQos.f13}</td>
					        </tr>
					        <tr>
					            <td>Number of triplets requested to AUC</td>
					            <td>${wkHlrAuthenQos.f14} </td>
					        </tr>
					        <tr>
					            <td>Number of quintets requested to AUC</td>
					            <td>${wkHlrAuthenQos.f15}</td>
					        </tr>
					        <tr>
					            <td>Number of messages answered with 'resource limitation' due to overflow of a high priority queue</td>
					            <td>${wkHlrAuthenQos.f16} </td>
					        </tr>
					    </table>
					</div>					
					
					<h3><a href="#" name="subscribers">HLR Subscribers Distribution</a></h3>
					<div>
					    <table class="simple2">
					        <tr>
					            <td>Total number of defined Mobile Subscribers</td>
					            <td>${wkHlrSubscribersQos.f1}</td>
					        </tr>
					        <tr>
					            <td>Total number of defined redundant subscribers</td>
					            <td>${wkHlrSubscribersQos.f2}</td>
					        </tr>
					        <tr>
					            <td>Primary Subscribers Distribution</td>
					            <td>${wkHlrSubscribersQos.f3} </td>
					        </tr>
					        <tr>
					            <td>Redundant Subscribers Distribution </td>
					            <td>${wkHlrSubscribersQos.f4} </td>
					        </tr>
					        <tr>
					            <td>All Subscribers Distribution </td>
					            <td>${wkHlrSubscribersQos.f5} </td>
					        </tr>
					    </table>
					</div>
					<h3><a href="#" name="register">Register HLR Subscribers</a></h3>
					<div>
					    <table class="simple2">
					        <tr>
					            <td>Daily Maximum Mobile Subscribers with known VLR</td>
					            <td>${wkHlrRegisterQos.f1}</td>
					        </tr>
					        <tr>
					            <td>Daily Maximum Mobile Subscribers with known SGSN</td>
					            <td>${wkHlrRegisterQos.f2}</td>
					        </tr>
					    </table>
					</div>
					<h3><a href="#" name="map">HLR MAP Operations Table</a></h3>				
					<div>			
					    <table class="simple2">
					        <tr>
					            <td>Number of total requests for a MAP operation</td>
					            <td>${wkHlrMapQos.f1}</td>
					        </tr>
					        <tr>
					            <td>Number of successful MAP operation executed</td>
					            <td>${wkHlrMapQos.f2}</td>
					        </tr>
					        <tr>
					            <td>Successful MAP operation executed rate(%)</td>
					            <td>${wkHlrMapQos.f3} %</td>
					        </tr>
					    </table>
					</div>
				</div>
			</td>			
	    	<td width="5%" valign="top"/>
		</tr>
	</table>
</div>

<script type="text/javascript" src="${pageContext.request.contextPath}/scripts/calendar.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/scripts/calendar_en.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/scripts/calendar_setup.js"></script>
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/styles/calendar-blue.css" />

<script type="text/javascript">
    Calendar.setup({
        inputField		:	"week",	// id of the input field
        ifFormat		:	"%W",   	// format of the input field
        button			:   "chooseWeek",  	// trigger for the calendar (button ID)
        singleClick		:   false					// double-click mode
    });
    
	$(function() {
		$("#notaccordion").addClass("ui-accordion ui-widget ui-helper-reset ui-accordion-icons")
		.find("h3")
			.addClass("ui-accordion-header ui-helper-reset ui-state-active ui-corner-top ui-state-focus")
			.prepend('<span class="ui-icon ui-icon-triangle-1-s"/>')
			.click(function() {
				$(this).toggleClass("ui-state-active ui-corner-top ui-state-focus ui-state-default ui-corner-all")
				.find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s")
				.end().next().toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").toggle();
				return false;
			})
			.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").show();
		
		var cache = {},
		lastXhr;
		$( "#hlrid" ).autocomplete({
			minLength: 2,
			source: function( request, response ) {
				var term = request.term;
				if ( term in cache ) {
					response( cache[ term ] );
					return;
				}

				lastXhr = $.getJSON( "${pageContext.request.contextPath}/ajax/getHlr.htm", request, function( data, status, xhr ) {
					cache[ term ] = data;
					if ( xhr === lastXhr ) {
						response( data );
					}
				});
			}
		});
	});
</script>
