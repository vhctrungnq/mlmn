<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SYS_USERS" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    <result column="USERNAME" property="username" jdbcType="VARCHAR" />
    <result column="ID" property="id" jdbcType="DECIMAL" />
    <result column="PASSWORD" property="password" jdbcType="VARCHAR" />
    <result column="FULLNAME" property="fullname" jdbcType="VARCHAR" />
    <result column="SEX" property="sex" jdbcType="VARCHAR" />
    <result column="POSITION" property="position" jdbcType="VARCHAR" />
    <result column="PHONE" property="phone" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="LOGIN_BY" property="loginBy" jdbcType="VARCHAR" />
    <result column="RECEIVING_SMS" property="receivingSms" jdbcType="VARCHAR" />
    <result column="RECEIVING_EMAIL" property="receivingEmail" jdbcType="VARCHAR" />
    <result column="IS_ENABLE" property="isEnable" jdbcType="VARCHAR" />
    <result column="ACTIVE_DATE" property="activeDate" jdbcType="TIMESTAMP" />
    <result column="EXPIRED" property="expired" jdbcType="TIMESTAMP" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="CREATED_BY" property="createdBy" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
    <result column="MODIFIED_BY" property="modifiedBy" jdbcType="VARCHAR" />
    <result column="MODIFY_DATE" property="modifyDate" jdbcType="TIMESTAMP" />
    <result column="MA_PHONG" property="maPhong" jdbcType="VARCHAR" />
    <result column="ROLES_ADD_USERS" property="rolesAddUsers" jdbcType="VARCHAR" />
    <result column="CC_EMAIL" property="ccEmail" jdbcType="VARCHAR" />
    <result column="CC_SMS" property="ccSms" jdbcType="VARCHAR" />
    <result column="IS_ROLE_SYSTEM" property="isRoleSystem" jdbcType="VARCHAR" />
    <result column="IS_SMS_LEASELINE" property="isSmsLeaseline" jdbcType="VARCHAR" />
    <result column="IS_ROLE_MANAGER" property="isRoleManager" jdbcType="VARCHAR" />
    <result column="TEAM" property="team" jdbcType="VARCHAR" />
    <result column="SUB_TEAM" property="subTeam" jdbcType="VARCHAR" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    select USERNAME, ID, PASSWORD, FULLNAME, SEX, POSITION, PHONE, EMAIL, LOGIN_BY, RECEIVING_SMS,
      RECEIVING_EMAIL, IS_ENABLE, ACTIVE_DATE, EXPIRED, DESCRIPTION, CREATED_BY, CREATE_DATE,
      MODIFIED_BY, MODIFY_DATE, MA_PHONG, ROLES_ADD_USERS, CC_EMAIL, CC_SMS, 
      IS_ROLE_SYSTEM, IS_SMS_LEASELINE, IS_ROLE_MANAGER, TEAM, SUB_TEAM
    from SYS_USERS
    where UPPER(USERNAME) = UPPER(#username:VARCHAR#)
  </select>
  
  <select id="selectByID" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vo.SysUsers" >
    select USERNAME, ID, PASSWORD, FULLNAME, SEX, POSITION, PHONE, EMAIL, LOGIN_BY, RECEIVING_SMS,
      RECEIVING_EMAIL, IS_ENABLE, ACTIVE_DATE, EXPIRED, DESCRIPTION, CREATED_BY, CREATE_DATE,
      MODIFIED_BY, MODIFY_DATE, MA_PHONG, ROLES_ADD_USERS, CC_EMAIL, CC_SMS, 
      IS_ROLE_SYSTEM, IS_SMS_LEASELINE, IS_ROLE_MANAGER, TEAM, SUB_TEAM
    from SYS_USERS
    where ID = #id:DECIMAL#
  </select>
  
 <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="String" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    delete from SYS_USERS
    where ID = #id:VARCHAR#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    insert into SYS_USERS (USERNAME, PASSWORD, FULLNAME, SEX, POSITION, PHONE, EMAIL, LOGIN_BY,
      RECEIVING_SMS, RECEIVING_EMAIL, IS_ENABLE, ACTIVE_DATE, EXPIRED, DESCRIPTION, CREATED_BY,
      CREATE_DATE, MA_PHONG, ROLES_ADD_USERS, CC_EMAIL, CC_SMS, 
      IS_ROLE_SYSTEM, IS_SMS_LEASELINE, IS_ROLE_MANAGER, TEAM, SUB_TEAM)
    values (#username:VARCHAR#, #password:VARCHAR#, #fullname:VARCHAR#,
      #sex:VARCHAR#, #position:VARCHAR#, #phone:VARCHAR#, #email:VARCHAR#, #loginBy:VARCHAR#,
      #receivingSms:VARCHAR#, #receivingEmail:VARCHAR#, #isEnable:VARCHAR#, #activeDate:TIMESTAMP#,
      #expired:TIMESTAMP#, #description:VARCHAR#, #createdBy:VARCHAR#, SYSDATE, #maPhong:VARCHAR#, #rolesAddUsers:VARCHAR#,
      #ccEmail:VARCHAR#, #ccSms:VARCHAR#,
      #isRoleSystem:VARCHAR#, #isSmsLeaseline:VARCHAR#, #isRoleManager:VARCHAR#, #team:VARCHAR#, #subTeam:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    insert into SYS_USERS
    <dynamic prepend="(" >
      <isNotNull prepend="," property="username" >
        USERNAME
      </isNotNull>
      <isNotNull prepend="," property="password" >
        PASSWORD
      </isNotNull>
      <isNotNull prepend="," property="fullname" >
        FULLNAME
      </isNotNull>
      <isNotNull prepend="," property="sex" >
        SEX
      </isNotNull>
      <isNotNull prepend="," property="position" >
        POSITION
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        PHONE
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL
      </isNotNull>
      <isNotNull prepend="," property="loginBy" >
        LOGIN_BY
      </isNotNull>
      <isNotNull prepend="," property="receivingSms" >
        RECEIVING_SMS
      </isNotNull>
      <isNotNull prepend="," property="receivingEmail" >
        RECEIVING_EMAIL
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        IS_ENABLE
      </isNotNull>
      <isNotNull prepend="," property="activeDate" >
        ACTIVE_DATE
      </isNotNull>
      <isNotNull prepend="," property="expired" >
        EXPIRED
      </isNotNull>
      <isNotNull prepend="," property="description" >
        DESCRIPTION
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        CREATED_BY
      </isNotNull>
      <isNotNull prepend="," property="maPhong" >
        MA_PHONG
      </isNotNull>
      <isNotNull prepend="," property="rolesAddUsers" >
        ROLES_ADD_USERS
      </isNotNull>
      <isNotNull prepend="," property="ccEmail" >
        CC_EMAIL
      </isNotNull>
      <isNotNull prepend="," property="ccSms" >
        CC_SMS
      </isNotNull>
      <isNotNull prepend="," property="team" >
        TEAM
      </isNotNull>
      <isNotNull prepend="," property="subTeam" >
        SUB_TEAM
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="username" >
        #username:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        #password:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fullname" >
        #fullname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sex" >
        #sex:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="position" >
        #position:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="loginBy" >
        #loginBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="receivingSms" >
        #receivingSms:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="receivingEmail" >
        #receivingEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        #isEnable:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="activeDate" >
        #activeDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="expired" >
        #expired:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="description" >
        #description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="maPhong" >
        #maPhong:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rolesAddUsers" >
        #rolesAddUsers:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ccEmail" >
        #ccEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ccSms" >
        #ccSms:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="team" >
        #team:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subTeam" >
        #subTeam:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    update SYS_USERS
    <dynamic prepend="set" >
      <isNotNull prepend="," property="id" >
        ID = #id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        PASSWORD = #password:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fullname" >
        FULLNAME = #fullname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sex" >
        SEX = #sex:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="position" >
        POSITION = #position:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        PHONE = #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="loginBy" >
        LOGIN_BY = #loginBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="receivingSms" >
        RECEIVING_SMS = #receivingSms:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="receivingEmail" >
        RECEIVING_EMAIL = #receivingEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        IS_ENABLE = #isEnable:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="activeDate" >
        ACTIVE_DATE = #activeDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="expired" >
        EXPIRED = #expired:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="description" >
        DESCRIPTION = #description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy" >
        CREATED_BY = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy" >
        MODIFIED_BY = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="maPhong" >
        MA_PHONG = #maPhong:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rolesAddUsers" >
        ROLES_ADD_USERS = #rolesAddUsers:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ccEmail" >
        CC_EMAIL = #ccEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ccSms" >
        CC_SMS = #ccSms:VARCHAR#
      </isNotNull>
    </dynamic>
    where USERNAME = #username:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vo.SysUsers" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Oct 24 16:22:23 ICT 2012.
    -->
    update SYS_USERS
    set
      PASSWORD = #password:VARCHAR#,
      FULLNAME = #fullname:VARCHAR#,
      SEX = #sex:VARCHAR#,
      POSITION = #position:VARCHAR#,
      PHONE = #phone:VARCHAR#,
      EMAIL = #email:VARCHAR#,
      LOGIN_BY = #loginBy:VARCHAR#,
      <!-- RECEIVING_SMS = #receivingSms:VARCHAR#,
      RECEIVING_EMAIL = #receivingEmail:VARCHAR#, -->
      IS_ENABLE = #isEnable:VARCHAR#,
      ACTIVE_DATE = #activeDate:TIMESTAMP#,
      EXPIRED = #expired:TIMESTAMP#,
      DESCRIPTION = #description:VARCHAR#,
      MODIFIED_BY = #modifiedBy:VARCHAR#,
      MODIFY_DATE = SYSDATE,
      MA_PHONG = #maPhong:VARCHAR#,
      <!-- ROLES_ADD_USERS = #rolesAddUsers:VARCHAR#, -->
      CC_EMAIL = #ccEmail:VARCHAR#,
      CC_SMS = #ccSms:VARCHAR#,
      TEAM = #team:VARCHAR#,
      SUB_TEAM = #subTeam:VARCHAR#
    where USERNAME = #username:VARCHAR#
  </update>
  
  <resultMap id="resultMapFilter" class="vo.SysUsers" >
   <result column="USERNAME" property="username" jdbcType="VARCHAR" />
   <result column="ID" property="id" jdbcType="DECIMAL" />
   <result column="PASSWORD" property="password" jdbcType="VARCHAR" />
   <result column="FULLNAME" property="fullname" jdbcType="VARCHAR" />
   <result column="SEX" property="sex" jdbcType="VARCHAR" />
   <result column="POSITION" property="position" jdbcType="VARCHAR" />
   <result column="PHONE" property="phone" jdbcType="VARCHAR" />
   <result column="EMAIL" property="email" jdbcType="VARCHAR" />
   <result column="LOGIN_BY" property="loginBy" jdbcType="VARCHAR" />
   <result column="RECEIVING_SMS" property="receivingSms" jdbcType="VARCHAR" />
   <result column="RECEIVING_EMAIL" property="receivingEmail" jdbcType="VARCHAR" />
   <result column="IS_ENABLE" property="isEnable" jdbcType="VARCHAR" />
   <result column="ACTIVE_DATE" property="activeDate" jdbcType="TIMESTAMP" />
   <result column="EXPIRED" property="expired" jdbcType="TIMESTAMP" />
   <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
   <result column="CREATED_BY" property="createdBy" jdbcType="VARCHAR" />
   <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
   <result column="MODIFIED_BY" property="modifiedBy" jdbcType="VARCHAR" />
   <result column="MODIFY_DATE" property="modifyDate" jdbcType="TIMESTAMP" />
   <result column="MA_PHONG" property="maPhong" jdbcType="VARCHAR" />
   <result column="NAME_TRANG_THAI" jdbcType="VARCHAR" property="nameTrangThai" />
   <result column="ROLES_ADD_USERS" property="rolesAddUsers" jdbcType="VARCHAR" />
   <result column="QUYEN_TAO_ND" property="quyenTaoNd" jdbcType="VARCHAR" />
   <result column="CC_EMAIL" property="ccEmail" jdbcType="VARCHAR" />
   <result column="CC_SMS" property="ccSms" jdbcType="VARCHAR" />
   <result column="RE_NAME_EMAIL" jdbcType="VARCHAR" property="reNameEmail" />
   <result column="RE_NAME_SMS" jdbcType="VARCHAR" property="reNameSms" />
   <result column="IS_ROLE_SYSTEM" property="isRoleSystem" jdbcType="VARCHAR" />
    <result column="IS_SMS_LEASELINE" property="isSmsLeaseline" jdbcType="VARCHAR" />
    <result column="IS_ROLE_MANAGER" property="isRoleManager" jdbcType="VARCHAR" />
    <result column="TEAM" property="team" jdbcType="VARCHAR" />
    <result column="SUB_TEAM" property="subTeam" jdbcType="VARCHAR" />
   </resultMap>
	<procedure id="getUsersFilter" resultMap="resultMapFilter">
	     {
	      call PK_SYS_USERS.GET_USERS_FILTER
	      (
		      #P_MA_PHONG,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      #P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      #P_EMAIL,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_PHONE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_IS_ENABLE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_ROLES_ADD_USERS,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_FULLNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_COLUMN,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_ORDER,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	</procedure>
	 
	 <parameterMap id="selectSysUsersParameterMap" class="java.util.Map">
        <parameter property="P_DATA" jdbcType="ORACLECURSOR" javaType="java.sql.ResultSet" mode="OUT" resultMap="ibatorgenerated_BaseResultMap"/>
 	 </parameterMap>
	 <procedure id="selectSysUsers" parameterMap="selectSysUsersParameterMap">
	      {call PK_SYS_USERS.SELECT_SYS_USERS(?)}
	 </procedure>
	 
	 <update id="updateIsEnable" parameterClass="vo.SysUsers">
	 	UPDATE SYS_USERS
		SET IS_ENABLE = #isEnable:VARCHAR#
		WHERE USERNAME = #username:VARCHAR#
	 </update>
	 
	 <parameterMap id="getUserByMaPhongParameterMap" class="java.util.Map">
	 	<parameter property="P_MA_PHONG" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
        <parameter property="P_DATA" jdbcType="ORACLECURSOR" javaType="java.sql.ResultSet" mode="OUT" resultMap="ibatorgenerated_BaseResultMap"/>
 	 </parameterMap>
	 <procedure id="getUserByMaPhong" parameterMap="getUserByMaPhongParameterMap">
	      {call PK_SYS_USERS.GET_USER_BY_MA_PHONG(?,?)}
	 </procedure>
	 
	 <parameterMap id="getUBMPDontIdParameterMap" class="java.util.Map">
	 	<parameter property="P_MA_PHONG" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
	 	<parameter property="P_ID" jdbcType="VARCHAR" javaType="java.lang.Integer" mode="IN" />
        <parameter property="P_DATA" jdbcType="ORACLECURSOR" javaType="java.sql.ResultSet" mode="OUT" resultMap="ibatorgenerated_BaseResultMap"/>
 	 </parameterMap>
	 <procedure id="getUsersByMaPhongDontId" parameterMap="getUBMPDontIdParameterMap">
	      {call PK_SYS_USERS.LOAD_BYMAPHONG_NOT_ID(?,?,?)}
	 </procedure>
	 
	 <procedure id="selectByUsernamePassword" resultClass="Integer">
	      {
	      	call PK_SYS_USERS.SELECTBYUSERNAME_PASSWORD
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_PASSWORD,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_DATA,jdbcType=INTEGER,mode=OUT,javaType=java.lang.Integer#
	      	)
	      }
	 </procedure>
	 
	 <procedure id="updatePasswordForUsername">
	      {
	      	call PK_SYS_USERS.UPDATE_PASS_FOR_USERNAME
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_PASSWORD,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
	      	)
	      }
	 </procedure>
	 
	 <procedure id="selectAllSysUsers" resultMap="ibatorgenerated_BaseResultMap">
	     {
	      call PK_SYS_USERS.SELECT_ALL_SYS_USERS
	      (
			  #P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	</procedure>
	
	  <procedure id="selectUsersOfAlarm" resultMap="ibatorgenerated_BaseResultMap">
	     {
	      call PK_SYS_USERS.PR_SYS_USERS_OF_ALARM_GET
	      (
			  #P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	</procedure>
	
	 
	
	<procedure id="selectSysUsersByUsername" resultMap="ibatorgenerated_BaseResultMap">
	     {
	      call PK_SYS_USERS.SELECT_SYS_USERS_BY_USERNAME
	      (
	      	  #P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  #P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	 </procedure>
	 
	<select id="selectSysUsersByfullName" parameterClass="vo.SysUsers" resultMap="ibatorgenerated_BaseResultMap">
   SELECT  * FROM SYS_USERS 
	   <dynamic prepend="where">
			       UPPER(FULLNAME) = UPPER(#fullname:VARCHAR#)		   
		</dynamic>
  </select>
  
  <resultMap class="vo.SYS_PARAMETER" id="resultSysParameter">
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="CODE" jdbcType="NVARCHAR" property="code" />
    <result column="NAME" jdbcType="NVARCHAR" property="name" />
    <result column="VALUE" jdbcType="NVARCHAR" property="value" />
    <result column="ORDERING" jdbcType="DECIMAL" property="ordering" />
    <result column="DATA_TYPE" jdbcType="NVARCHAR" property="dataType" />
    <result column="CREATED_BY" jdbcType="NVARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="NVARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="REMARK" jdbcType="NVARCHAR" property="remark" />
  </resultMap>
  <procedure id="titleSysUsers" resultMap="resultSysParameter">
	      {
	      	call PK_SYS_USERS.TITLE_SYS_USERS
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getQuyenTaoNDList" resultMap="resultSysParameter">
	      {
	      	call PK_SYS_USERS.GET_QUYEN_TAO_ND_LIST
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getTrangThaiList" resultMap="resultSysParameter">
	      {
	      	call PK_SYS_USERS.GET_TRANG_THAI_LIST
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="titleDoiMatKhau" resultMap="resultSysParameter">
	      {
	      	call PK_SYS_USERS.TITLE_DOI_MAT_KHAU
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  <procedure id="checkUser" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_SYS_USERS.PR_CHECK_USER
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getUserByUsername" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_SYS_USERS.GET_USERS_BY_USERNAME
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getCountUserOfModule" resultClass="Integer">
 	 {
 	 	call pk_sys_users.GET_COUNT_USER_OF_MODULE
 	 	(
 	 		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_SYSTEM,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_DATA,jdbcType=INTEGER,mode=OUT,javaType=java.lang.Integer#
 	 	)
 	 }
  </procedure>
<!--  LAY DANH SACH USER DUOC GUI TIN NHAN VE SU SO LON XAY RA TRONG CA TRUC -->
    <procedure id="getUserByGroupSMS" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_AL_SHIFT_MLMN.PR_SYS_USER_SENDSMS_GET
	      	(
	      		#P_GROUP_SMS,jdbcType=VARCHAR,mode=IN#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getUserByPhone" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_AL_SHIFT_MLMN.PR_USER_BY_PHONE_GET
	      	(
	      		#P_PHONE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
	<!-- <procedure id="updateRolesForUsername">
 	 {
 	 	call pk_sys_users.UPDATE_ROLES_FOR_USERNAME
 	 	(
 	 		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_RECEIVING_SMS,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_RECEIVING_EMAIL,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_ROLES_ADD_USERS,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_MODIFIED_BY,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
 	 	)
 	 }
  </procedure> -->
  
  <update id="updateRolesForUsername" parameterClass="vo.SysUsers" >
    update SYS_USERS
    set
      RECEIVING_SMS = #receivingSms:VARCHAR#,
      ROLES_ADD_USERS = #rolesAddUsers:VARCHAR#,
      IS_ROLE_SYSTEM = #isRoleSystem:VARCHAR#,
      IS_SMS_LEASELINE = #isSmsLeaseline:VARCHAR#,
      IS_ROLE_MANAGER = #isRoleManager:VARCHAR#,
      MODIFIED_BY = #modifiedBy:VARCHAR#,
      CC_SMS = #ccSms:VARCHAR#,
      MODIFY_DATE = SYSDATE
    where UPPER(USERNAME) = UPPER(#username:VARCHAR#)
  </update>
  
  <procedure id="updateSysUserArea">
 	 {
 	 	call pk_sys_users.UPDATE_SYS_USER_AREA
 	 	(
 	 		#P_ID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_IS_ENABLE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_ALARM_KPI,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
 	 	)
 	 }
  </procedure>
  
  <procedure id="smsAddIsdn">
 	 {
 	 	call pk_sms.sms_add_isdn
 	 	(
 	 		#P_PHONE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
 	 	)
 	 }
  </procedure>
  
  <procedure id="copyRoleToUsernameNew">
 	 {
 	 	call pk_sys_users.COPY_ROLE_TO_USERNAME_NEW
 	 	(
 	 		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_CREATED_BY,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_USERNAME_NEW,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_PASSWORK_NEW,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
 	 		#P_EMAIL_NEW,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
 	 	)
 	 }
  </procedure>
  
  <procedure id="deleteRoleByUsername">
 	 {
 	 	call pk_sys_users.DELETE_ROLE_BY_USERNAME
 	 	(
 	 		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#
 	 	)
 	 }
  </procedure>
  
  <procedure id="getCheckSysUsersByEmail" resultMap="ibatorgenerated_BaseResultMap">
	     {
	      call PK_SYS_USERS.GET_CHECK_SYS_USERS_BY_EMAIL
	      (
	      		#P_EMAIL,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_ID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			  	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	</procedure>
	
	<!-- LAY SANH SACH LIEN HE: TEN/SDT -->
	<resultMap id="BaseResultMapContact" class="vo.SysUsers" >
    	<result column="FULLNAME" property="fullname" jdbcType="VARCHAR" />
  	</resultMap>
	<procedure id="getContactUser" resultMap="BaseResultMapContact">
	     {
	      call PK_SYS_USERS.PR_CONTACT_USER_GET
	      (
	      		#P_DEPT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      )
	     }
	</procedure>
	
	<procedure id="checkEmailOfShift" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_AL_MANAGE_MLMN.CHECK_EMAIL_OF_SHIFT
	      	(
	      		#P_EMAIL,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getUserAllByMaPhong" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_AL_SET_CONFIGS.PR_GET_USER_BY_DEPT_SMS
	      	(
	      		#P_MA_PHONG,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_TEAM,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="checkRole" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_SYS_USERS.PR_CHECK_ROLE
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
<!-- //lay user co chuc vu ngang bang hoac be hon nguoi giao viec    -->
  <procedure id="getUserForWork" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_SYS_USERS.PR_GET_USER_FOR_WORK
	      	(
	      		#P_MA_PHONG,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DILIVER,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <!-- //lay thong tin Use kèm theo một số thông tin như khu vực use trực thuộc. AnhCTV:16/11/2015 -->
	<resultMap id="resultMapFilterNormal" class="vo.SysUsers" >
   		<result column="USERNAME" property="username" jdbcType="VARCHAR" />
	    <result column="ID" property="id" jdbcType="DECIMAL" />
	    <result column="PASSWORD" property="password" jdbcType="VARCHAR" />
	    <result column="FULLNAME" property="fullname" jdbcType="VARCHAR" />
	    <result column="SEX" property="sex" jdbcType="VARCHAR" />
	    <result column="POSITION" property="position" jdbcType="VARCHAR" />
	    <result column="PHONE" property="phone" jdbcType="VARCHAR" />
	    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
	    <result column="LOGIN_BY" property="loginBy" jdbcType="VARCHAR" />
	    <result column="RECEIVING_SMS" property="receivingSms" jdbcType="VARCHAR" />
	    <result column="RECEIVING_EMAIL" property="receivingEmail" jdbcType="VARCHAR" />
	    <result column="IS_ENABLE" property="isEnable" jdbcType="VARCHAR" />
	    <result column="ACTIVE_DATE" property="activeDate" jdbcType="TIMESTAMP" />
	    <result column="EXPIRED" property="expired" jdbcType="TIMESTAMP" />
	    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
	    <result column="CREATED_BY" property="createdBy" jdbcType="VARCHAR" />
	    <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
	    <result column="MODIFIED_BY" property="modifiedBy" jdbcType="VARCHAR" />
	    <result column="MODIFY_DATE" property="modifyDate" jdbcType="TIMESTAMP" />
	    <result column="MA_PHONG" property="maPhong" jdbcType="VARCHAR" />
	    <result column="ROLES_ADD_USERS" property="rolesAddUsers" jdbcType="VARCHAR" />
	    <result column="CC_EMAIL" property="ccEmail" jdbcType="VARCHAR" />
	    <result column="CC_SMS" property="ccSms" jdbcType="VARCHAR" />
	    <result column="IS_ROLE_SYSTEM" property="isRoleSystem" jdbcType="VARCHAR" />
	    <result column="IS_SMS_LEASELINE" property="isSmsLeaseline" jdbcType="VARCHAR" />
	    <result column="IS_ROLE_MANAGER" property="isRoleManager" jdbcType="VARCHAR" />
	    <result column="TEAM" property="team" jdbcType="VARCHAR" />
	    <result column="SUB_TEAM" property="subTeam" jdbcType="VARCHAR" />
	    <result column="REGION" property="region" jdbcType="VARCHAR" />
   </resultMap>
  <procedure id="selectByUsename" resultMap="resultMapFilterNormal">
	      {
	      	call PK_SYS_USERS.PR_GET_USER_BY_USERNAME
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
 <!--  check=1: user thuoc phong ky thuat. Lay thong tin dai vt tu du lieu import, nguoc lai: lay thong tin dai vt la phong ban cua user truc thuoc. AnhCTV:13/11/2017
	 -->
   <procedure id="getUserRoleQLDN" resultClass="Integer">
	      {
	      	call PK_SYS_USERS.GET_USER_ROLE_QLDN
	      	(
	      		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_DATA,jdbcType=INTEGER,mode=OUT,javaType=java.lang.Integer#
	      	)
	      }
	 </procedure>
	 
	 <!-- //lay danh sach user thuoc phong ban va quan ly quan huyen AnhCTV. 14/03/2018  -->
  <procedure id="getUserByDeptDistrict" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_SYS_USERS.PR_GET_USER_BY_DEPT_DISTRICT
	      	(
	      		#P_MA_PHONG,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DISTRICT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
</sqlMap>