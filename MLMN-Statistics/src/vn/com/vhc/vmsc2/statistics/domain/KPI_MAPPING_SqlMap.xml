<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KPI_MAPPING" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    <result column="CONFIG_ID" property="configId" jdbcType="DECIMAL" />
    <result column="REPORT_NAME" property="reportName" jdbcType="VARCHAR" />
    <result column="REPORT_NAME_COLUMN" property="reportNameColumn" jdbcType="VARCHAR" />
    <result column="FORMULA" property="formula" jdbcType="VARCHAR" />
    <result column="VENDOR" property="vendor" jdbcType="VARCHAR" />
    <result column="TABLE_NAME" property="tableName" jdbcType="VARCHAR" />
    <result column="TABLE_COLUMN" property="tableColumn" jdbcType="VARCHAR" />
    <result column="DATABASE_FORMULA" property="databaseFormula" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="DATE" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="NETWORK" property="network" jdbcType="VARCHAR" />
    <result column="VERSION" property="version" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="ibatorgenerated_BaseResultMap1" class="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <result column="CONFIG_ID" property="configId" jdbcType="DECIMAL" />
    <result column="REPORT_NAME" property="reportName" jdbcType="VARCHAR" />
    <result column="REPORT_NAME_COLUMN" property="reportNameColumn" jdbcType="VARCHAR" />
    <result column="FORMULA" property="formula" jdbcType="VARCHAR" />
    <result column="VENDOR" property="vendor" jdbcType="VARCHAR" />
    <result column="TABLE_NAME" property="tableName" jdbcType="VARCHAR" />
    <result column="TABLE_COLUMN" property="tableColumn" jdbcType="VARCHAR" />
    <result column="DATABASE_FORMULA" property="databaseFormula" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="DATE" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="NETWORK" property="network" jdbcType="VARCHAR" />
    <result column="VERSION" property="version" jdbcType="VARCHAR" />
    <result column="TRANG_THAI" property="trangthai" jdbcType="VARCHAR" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    select CONFIG_ID, REPORT_NAME, REPORT_NAME_COLUMN, FORMULA, VENDOR, TABLE_NAME, TABLE_COLUMN,
      DATABASE_FORMULA, STATUS, UPDATE_DATE, DESCRIPTION, NETWORK, VERSION
    from KPI_MAPPING
    where CONFIG_ID = #configId:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    delete from KPI_MAPPING
    where CONFIG_ID = #configId:DECIMAL#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    insert into KPI_MAPPING (CONFIG_ID, REPORT_NAME, REPORT_NAME_COLUMN, FORMULA, VENDOR,
      TABLE_NAME, TABLE_COLUMN, DATABASE_FORMULA, STATUS, UPDATE_DATE, DESCRIPTION, NETWORK,
      VERSION)
    values (#configId:DECIMAL#, #reportName:VARCHAR#, #reportNameColumn:VARCHAR#, #formula:VARCHAR#,
      #vendor:VARCHAR#, #tableName:VARCHAR#, #tableColumn:VARCHAR#, #databaseFormula:VARCHAR#,
      #status:VARCHAR#, SYSDATE, #description:VARCHAR#, #network:VARCHAR#,
      #version:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    insert into KPI_MAPPING
    <dynamic prepend="(" >
      <isNotNull prepend="," property="configId" >
        CONFIG_ID
      </isNotNull>
      <isNotNull prepend="," property="reportName" >
        REPORT_NAME
      </isNotNull>
      <isNotNull prepend="," property="reportNameColumn" >
        REPORT_NAME_COLUMN
      </isNotNull>
      <isNotNull prepend="," property="formula" >
        FORMULA
      </isNotNull>
      <isNotNull prepend="," property="vendor" >
        VENDOR
      </isNotNull>
      <isNotNull prepend="," property="tableName" >
        TABLE_NAME
      </isNotNull>
      <isNotNull prepend="," property="tableColumn" >
        TABLE_COLUMN
      </isNotNull>
      <isNotNull prepend="," property="databaseFormula" >
        DATABASE_FORMULA
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="description" >
        DESCRIPTION
      </isNotNull>
      <isNotNull prepend="," property="network" >
        NETWORK
      </isNotNull>
      <isNotNull prepend="," property="version" >
        VERSION
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="configId" >
        #configId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="reportName" >
        #reportName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="reportNameColumn" >
        #reportNameColumn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="formula" >
        #formula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="vendor" >
        #vendor:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tableName" >
        #tableName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tableColumn" >
        #tableColumn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="databaseFormula" >
        #databaseFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        #status:VARCHAR#
      </isNotNull>
        SYSDATE,
      <isNotNull prepend="," property="description" >
        #description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="network" >
        #network:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="version" >
        #version:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    update KPI_MAPPING
    <dynamic prepend="set" >
      <isNotNull prepend="," property="reportName" >
        REPORT_NAME = #reportName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="reportNameColumn" >
        REPORT_NAME_COLUMN = #reportNameColumn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="formula" >
        FORMULA = #formula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="vendor" >
        VENDOR = #vendor:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tableName" >
        TABLE_NAME = #tableName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tableColumn" >
        TABLE_COLUMN = #tableColumn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="databaseFormula" >
        DATABASE_FORMULA = #databaseFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:VARCHAR#
      </isNotNull>
      SYSDATE,
      <isNotNull prepend="," property="description" >
        DESCRIPTION = #description:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="network" >
        NETWORK = #network:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="version" >
        VERSION = #version:VARCHAR#
      </isNotNull>
    </dynamic>
    where CONFIG_ID = #configId:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 28 12:08:48 ICT 2013.
    -->
    update KPI_MAPPING
    set REPORT_NAME = #reportName:VARCHAR#,
      REPORT_NAME_COLUMN = #reportNameColumn:VARCHAR#,
      FORMULA = #formula:VARCHAR#,
      VENDOR = #vendor:VARCHAR#,
      TABLE_NAME = #tableName:VARCHAR#,
      TABLE_COLUMN = #tableColumn:VARCHAR#,
      DATABASE_FORMULA = #databaseFormula:VARCHAR#,
      STATUS = #status:VARCHAR#,
      UPDATE_DATE = SYSDATE,
      DESCRIPTION = #description:VARCHAR#,
      NETWORK = #network:VARCHAR#,
      VERSION = #version:VARCHAR#
    where CONFIG_ID = #configId:DECIMAL#
  </update>
  
  <select id="getAll" resultMap="ibatorgenerated_BaseResultMap" >
  	select m.*, t.TRANG_THAI
    from KPI_MAPPING m, SYS_PARAMETERS t
    where  m.STATUS = t.MA_TT
  	order by UPPER(REPORT_NAME) asc
 </select>
 
 <select id="filter" resultMap="ibatorgenerated_BaseResultMap1" parameterClass="vn.com.vhc.vmsc2.statistics.web.filter.KpiMappingFilter" >
    Select p.*,t.TRANG_THAI
    From KPI_MAPPING p, SYS_PARAMETERS t
    Where	p.STATUS = t.Ma_TT
    <dynamic prepend="and" >
      <isNotEmpty prepend="and" property="reportName" >
        UPPER(p.REPORT_NAME) like '%' || UPPER(#reportName:VARCHAR#) || '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="reportNameColumn" >
        UPPER(p.REPORT_NAME_COLUMN) like '%' || UPPER(#reportNameColumn:VARCHAR#) || '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="vendor">
        UPPER(p.VENDOR) like '%' ||UPPER(#vendor:VARCHAR#)|| '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="tableName" >
        UPPER(p.TABLE_NAME) like '%' || UPPER(#tableName:VARCHAR#) || '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="tableColumn" >
        UPPER(p.TABLE_COLUMN) like '%' || UPPER(#tableColumn:VARCHAR#) || '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="status">
        UPPER(p.STATUS) like '%' ||UPPER(#status:VARCHAR#)|| '%'
      </isNotEmpty>
      <isNotEmpty prepend="and" property="network">
        UPPER(p.NETWORK) like '%' ||UPPER(#network:VARCHAR#)|| '%'
      </isNotEmpty>
    </dynamic>
    order by UPPER(p.REPORT_NAME) asc
  </select>
  
  <select id="exitKpiMapping" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vn.com.vhc.vmsc2.statistics.domain.KpiMapping" >
    select *
    from KPI_MAPPING
    where REPORT_NAME = #reportName:VARCHAR#
    order by UPPER(REPORT_NAME) asc
  </select>
</sqlMap>