<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="R_ALARM_ROUTER_LOG" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vo.RAlarmRouterLog" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 07 08:48:53 ICT 2013.
    -->
    <result column="SDATE" property="sdate" jdbcType="TIMESTAMP" />
    <result column="IP" property="ip" jdbcType="VARCHAR" />
    <result column="ALARM_INFO" property="alarmInfo" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
    <result column="ALARM_LOG_ID" property="alarmLogId" jdbcType="VARCHAR" />
    <result column="LOCAL" property="local" jdbcType="VARCHAR" />
    <result column="ROUTER_NAME" property="routerName" jdbcType="VARCHAR" />
  </resultMap>
  
    <procedure id="filter" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
      {
	      call PK_ALARM_LOG.pr_alarm_log_router_get
	      (
	      	#p_SDATE,jdbcType=VARCHAR,mode=IN#,
	      	#p_EDATE,jdbcType=VARCHAR,mode=IN#,
	      	#p_IP,jdbcType=VARCHAR,mode=IN#,
	      	#p_ROUTER_NAME,jdbcType=VARCHAR,mode=IN#,
			#p_ALARM_INFO,jdbcType=VARCHAR,mode=IN#,
			
			#p_COLUMN,jdbcType=VARCHAR,mode=IN#,
			#p_ORDER,jdbcType=DECIMAL,mode=IN#,
			#p_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		  )
      }
 </procedure>

 <!--  <parameterMap class="java.util.Map" id="filter">
    <parameter property="ip" />
    <parameter property="sDate" />
    <parameter property="eDate" />
  </parameterMap>
  
  <select id="filter" parameterClass="vo.alarm.utils.RAlarmRouterLogFilter" resultMap="ibatorgenerated_BaseResultMap">
  	SELECT * FROM R_ALARM_ROUTER_LOG
  	<dynamic prepend="where">
		<isNotEmpty prepend="and" property="sDate">
	        SDATE <![CDATA[ >= ]]> to_date(#sDate#, 'DD/MM/YYYY HH24:mi')
	      </isNotEmpty>
	    <isNotEmpty prepend="and" property="eDate">
	        SDATE <![CDATA[ <= ]]> to_date(#eDate#, 'DD/MM/YYYY HH24:mi')
	      </isNotEmpty>
		<isNotEmpty prepend="and" property="ip">
		   IP like '%'||UPPER(#ip:VARCHAR#)||'%'
		</isNotEmpty>
  	</dynamic> 
  	order by SDATE,IP
  </select> -->
</sqlMap>