<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="V_RP_IBC_3G">
  <resultMap class="vo.VRpIbc3g" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue May 09 15:52:59 ICT 2017.
    -->
    <result column="DAY" jdbcType="DATE" property="day" />
    <result column="HOUR" jdbcType="DECIMAL" property="hour" />
    <result column="SITEID" jdbcType="VARCHAR" property="siteid" />
    <result column="CELLID" jdbcType="VARCHAR" property="cellid" />
    <result column="CSSR_3G" jdbcType="DECIMAL" property="cssr3g" />
    <result column="CDR_3G" jdbcType="DECIMAL" property="cdr3g" />
    <result column="PASR_3G" jdbcType="DECIMAL" property="pasr3g" />
    <result column="PADR_3G" jdbcType="DECIMAL" property="padr3g" />
    <result column="NUM_CSFAIL" jdbcType="DECIMAL" property="numCsfail" />
    <result column="NUM_CSDROP3G" jdbcType="DECIMAL" property="numCsdrop3g" />
    <result column="NUM_PSFAIL" jdbcType="DECIMAL" property="numPsfail" />
    <result column="NUM_PSDROP3G" jdbcType="DECIMAL" property="numPsdrop3g" />
    <result column="TIMES" jdbcType="DECIMAL" property="times" />
    <!-- TRUNGNQ THEM KPI RTWP, TRAFFIC 3G, DATA3G -->
    <result column="RTPW" jdbcType="DECIMAL" property="rtpw" />
  </resultMap>
  <insert id="ibatorgenerated_insert" parameterClass="vo.VRpIbc3g">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue May 09 15:52:59 ICT 2017.
    -->
    insert into V_RP_IBC_3G (DAY, HOUR, SITEID, CELLID, CSSR_3G, CDR_3G, PASR_3G, PADR_3G,
      NUM_CSFAIL, NUM_CSDROP3G, NUM_PSFAIL, NUM_PSDROP3G, TIMES)
    values (#day:DATE#, #hour:DECIMAL#, #siteid:VARCHAR#, #cellid:VARCHAR#, #cssr3g:DECIMAL#,
      #cdr3g:DECIMAL#, #pasr3g:DECIMAL#, #padr3g:DECIMAL#, #numCsfail:DECIMAL#,
      #numCsdrop3g:DECIMAL#, #numPsfail:DECIMAL#, #numPsdrop3g:DECIMAL#, #times:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vo.VRpIbc3g">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue May 09 15:52:59 ICT 2017.
    -->
    insert into V_RP_IBC_3G
    <dynamic prepend="(">
      <isNotNull prepend="," property="day">
        DAY
      </isNotNull>
      <isNotNull prepend="," property="hour">
        HOUR
      </isNotNull>
      <isNotNull prepend="," property="siteid">
        SITEID
      </isNotNull>
      <isNotNull prepend="," property="cellid">
        CELLID
      </isNotNull>
      <isNotNull prepend="," property="cssr3g">
        CSSR_3G
      </isNotNull>
      <isNotNull prepend="," property="cdr3g">
        CDR_3G
      </isNotNull>
      <isNotNull prepend="," property="pasr3g">
        PASR_3G
      </isNotNull>
      <isNotNull prepend="," property="padr3g">
        PADR_3G
      </isNotNull>
      <isNotNull prepend="," property="numCsfail">
        NUM_CSFAIL
      </isNotNull>
      <isNotNull prepend="," property="numCsdrop3g">
        NUM_CSDROP3G
      </isNotNull>
      <isNotNull prepend="," property="numPsfail">
        NUM_PSFAIL
      </isNotNull>
      <isNotNull prepend="," property="numPsdrop3g">
        NUM_PSDROP3G
      </isNotNull>
      <isNotNull prepend="," property="times">
        TIMES
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="day">
        #day:DATE#
      </isNotNull>
      <isNotNull prepend="," property="hour">
        #hour:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="siteid">
        #siteid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cellid">
        #cellid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cssr3g">
        #cssr3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="cdr3g">
        #cdr3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="pasr3g">
        #pasr3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="padr3g">
        #padr3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numCsfail">
        #numCsfail:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numCsdrop3g">
        #numCsdrop3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numPsfail">
        #numPsfail:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="numPsdrop3g">
        #numPsdrop3g:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="times">
        #times:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id = "getListCellIbc3g" resultClass = "String">
  	select cellid from h_cell_3g where substr(cellid, -1) in ('J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R')
  		order by cellid
  </select>
  <procedure id="getDataList" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
      {
       call PK_RP_IBC.GET_DATA_3G
       ( 
    	#p_start_date,jdbcType=VARCHAR,mode=IN#,
    	#p_end_date,jdbcType=VARCHAR,mode=IN#,
    	#p_start_hour,jdbcType=INTEGER,mode=IN#,
    	#p_end_hour,jdbcType=INTEGER,mode=IN#,
    	#p_cellid,jdbcType=VARCHAR,mode=IN#,
        #p_data,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
    )
      }
 </procedure>
 
   <resultMap class="vo.VRpIbc3g" id="Traffic3g_ResultMap">
    <result column="DAY" jdbcType="DATE" property="day" />
    <result column="SITEID" jdbcType="VARCHAR" property="siteid" />
    <result column="CELLID" jdbcType="VARCHAR" property="cellid" />
    <result column="TRAFFIC_3G" jdbcType="DECIMAL" property="traffic3g" />
    <result column="LAST_WEEK_TRAFFIC_3G" jdbcType="DECIMAL" property="lastWeekTraffic3g" />
    <result column="DATA_3G" jdbcType="DECIMAL" property="data3g" />
    <result column="LAST_WEEK_DATA_3G" jdbcType="DECIMAL" property="lastWeekData3g" />
    <result column="IS_BAD_CELL" jdbcType="VARCHAR" property="isBadCell" />
  </resultMap>
  
   <procedure id="getTraffic3gDataList" parameterClass="java.util.Map" resultMap="Traffic3g_ResultMap">
      {
       call PK_RP_IBC.GET_TRAFFIC_DATA_3G
       ( 
    	#p_start_date,jdbcType=VARCHAR,mode=IN#,
    	#p_end_date,jdbcType=VARCHAR,mode=IN#,
    	#p_cellid,jdbcType=VARCHAR,mode=IN#,
        #p_data,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
    )
      }
 </procedure>
</sqlMap>