<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="DY_IPBB_FW" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    <result column="DAY" property="day" jdbcType="TIMESTAMP" />
    <result column="ROUTE" property="route" jdbcType="VARCHAR" />
    <result column="SCP" property="scp" jdbcType="VARCHAR" />
    <result column="CPU_MAX" property="cpuMax" jdbcType="DECIMAL" />
    <result column="CPU_UTIL" property="cpuUtil" jdbcType="DECIMAL" />
    <result column="MEMMORY_UTIL" property="memmoryUtil" jdbcType="DECIMAL" />
    <result column="AVG_SESSION" property="avgSession" jdbcType="DECIMAL" />
    <result column="TOTAL_SESSION" property="totalSession" jdbcType="DECIMAL" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    select DAY, ROUTE, SCP, CPU_UTIL, MEMMORY_UTIL, AVG_SESSION, TOTAL_SESSION
    from DY_IPBB_FW
    where DAY = #day:TIMESTAMP#
      and ROUTE = #route:VARCHAR#
      and SCP = #scp:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    delete from DY_IPBB_FW
    where DAY = #day:TIMESTAMP#
      and ROUTE = #route:VARCHAR#
      and SCP = #scp:VARCHAR#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    insert into DY_IPBB_FW (DAY, ROUTE, SCP, CPU_UTIL, MEMMORY_UTIL, AVG_SESSION, TOTAL_SESSION)
    values (#day:TIMESTAMP#, #route:VARCHAR#, #scp:VARCHAR#, #cpuUtil:DECIMAL#,
      #memmoryUtil:DECIMAL#, #avgSession:DECIMAL#, #totalSession:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    insert into DY_IPBB_FW
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        DAY
      </isNotNull>
      <isNotNull prepend="," property="route" >
        ROUTE
      </isNotNull>
      <isNotNull prepend="," property="scp" >
        SCP
      </isNotNull>
      <isNotNull prepend="," property="cpuUtil" >
        CPU_UTIL
      </isNotNull>
      <isNotNull prepend="," property="memmoryUtil" >
        MEMMORY_UTIL
      </isNotNull>
      <isNotNull prepend="," property="avgSession" >
        AVG_SESSION
      </isNotNull>
      <isNotNull prepend="," property="totalSession" >
        TOTAL_SESSION
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        #day:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="route" >
        #route:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="scp" >
        #scp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cpuUtil" >
        #cpuUtil:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="memmoryUtil" >
        #memmoryUtil:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="avgSession" >
        #avgSession:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="totalSession" >
        #totalSession:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    update DY_IPBB_FW
    <dynamic prepend="set" >
      <isNotNull prepend="," property="cpuUtil" >
        CPU_UTIL = #cpuUtil:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="memmoryUtil" >
        MEMMORY_UTIL = #memmoryUtil:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="avgSession" >
        AVG_SESSION = #avgSession:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="totalSession" >
        TOTAL_SESSION = #totalSession:DECIMAL#
      </isNotNull>
    </dynamic>
    where DAY = #day:TIMESTAMP#
      and ROUTE = #route:VARCHAR#
      and SCP = #scp:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    update DY_IPBB_FW
    set CPU_UTIL = #cpuUtil:DECIMAL#,
      MEMMORY_UTIL = #memmoryUtil:DECIMAL#,
      AVG_SESSION = #avgSession:DECIMAL#,
      TOTAL_SESSION = #totalSession:DECIMAL#
    where DAY = #day:TIMESTAMP#
      and ROUTE = #route:VARCHAR#
      and SCP = #scp:VARCHAR#
  </update>
  <parameterMap class="java.util.Map" id="filterMap">
    <parameter property="routeid" />
    <parameter property="scp" />
    <parameter property="startDate" />
    <parameter property="endDate" />
  </parameterMap>
  
  <select id="filter" parameterMap="filterMap" resultMap="ibatorgenerated_BaseResultMap">
    select * from DY_IPBB_FW
    <dynamic prepend="where">
       <isNotEmpty prepend="and" property="routeid">
        ROUTE = #routeid:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="scp">
        SCP = #scp:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty>
    </dynamic>
    order by DAY, ROUTE, To_number(SUBSTR(SCP,instr(SCP,'FPC')+3,length(SCP)))
  </select>
  
  <procedure id="getData" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call pk_dy_ipbb_fw.GET_DATA
	      	(
	      		#P_START_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_END_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_ROUTE_ID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_SCP,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  <resultMap id="resultMap" class="vn.com.vhc.vmsc2.statistics.domain.DyIpbbFw" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 02 14:34:36 ICT 2013.
    -->
    <result column="DAY" property="day" jdbcType="TIMESTAMP" />
  </resultMap>
  <procedure id="getDayList" resultMap="resultMap">
	      {
	      	call pk_dy_ipbb_fw.GET_DAY_LIST
	      	(
	      		#P_START_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
	      		#P_END_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
</sqlMap>