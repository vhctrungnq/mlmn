<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="W_WORKING_FEEDBACKS">
  <resultMap class="vo.W_WORKING_FEEDBACKS" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="NGUOI_NHAN_XET" jdbcType="VARCHAR" property="nguoiNhanXet" />
    <result column="THOI_GIAN" jdbcType="TIMESTAMP" property="thoiGian" />
    <result column="NOI_DUNG" jdbcType="VARCHAR" property="noiDung" />
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="ID_WORKS" jdbcType="DECIMAL" property="idWorks" />
    <result column="CREATED_BY_TCP_IP" jdbcType="VARCHAR" property="createdByTcpIp" />
    <result column="MODIFIED_BY_TCP_IP" jdbcType="VARCHAR" property="modifiedByTcpIp" />
    <result column="ID_PROCESSES" jdbcType="DECIMAL" property="idProcesses" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="vo.W_WORKING_FEEDBACKS" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    select ID, NGUOI_NHAN_XET, THOI_GIAN, NOI_DUNG, CREATED_BY, CREATE_DATE, MODIFIED_BY,
      MODIFY_DATE, ID_WORKS, CREATED_BY_TCP_IP, MODIFIED_BY_TCP_IP, ID_PROCESSES
    from W_WORKING_FEEDBACKS
    where ID = #id:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="vo.W_WORKING_FEEDBACKS">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    delete from W_WORKING_FEEDBACKS
    where ID = #id:DECIMAL#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vo.W_WORKING_FEEDBACKS">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    insert into W_WORKING_FEEDBACKS (NGUOI_NHAN_XET, THOI_GIAN, NOI_DUNG,CREATED_BY,
      CREATE_DATE, ID_WORKS, CREATED_BY_TCP_IP, MODIFIED_BY_TCP_IP, ID_PROCESSES)
    values (#nguoiNhanXet:VARCHAR#, SYSDATE, #noiDung:VARCHAR#,#createdBy:VARCHAR#,
      SYSDATE, #idWorks:DECIMAL#, #createdByTcpIp:VARCHAR#, #modifiedByTcpIp:VARCHAR#, #idProcesses:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vo.W_WORKING_FEEDBACKS">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    insert into W_WORKING_FEEDBACKS
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        ID
      </isNotNull>
      <isNotNull prepend="," property="nguoiNhanXet">
        NGUOI_NHAN_XET
      </isNotNull>
      <isNotNull prepend="," property="thoiGian">
        THOI_GIAN
      </isNotNull>
      <isNotNull prepend="," property="noiDung">
        NOI_DUNG
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        CREATED_BY
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        CREATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        MODIFIED_BY
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        MODIFY_DATE
      </isNotNull>
      <isNotNull prepend="," property="idWorks">
        ID_WORKS
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp">
        CREATED_BY_TCP_IP
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp">
        MODIFIED_BY_TCP_IP
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="nguoiNhanXet">
        #nguoiNhanXet:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="thoiGian">
        #thoiGian:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="noiDung">
        #noiDung:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="idWorks">
        #idWorks:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp">
        #createdByTcpIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp">
        #modifiedByTcpIp:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vo.W_WORKING_FEEDBACKS">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    update W_WORKING_FEEDBACKS
    <dynamic prepend="set">
      <isNotNull prepend="," property="nguoiNhanXet">
        NGUOI_NHAN_XET = #nguoiNhanXet:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="thoiGian">
        THOI_GIAN = #thoiGian:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="noiDung">
        NOI_DUNG = #noiDung:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        CREATED_BY = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        CREATE_DATE = #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        MODIFIED_BY = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        MODIFY_DATE = #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="idWorks">
        ID_WORKS = #idWorks:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdByTcpIp">
        CREATED_BY_TCP_IP = #createdByTcpIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedByTcpIp">
        MODIFIED_BY_TCP_IP = #modifiedByTcpIp:VARCHAR#
      </isNotNull>
    </dynamic>
    where ID = #id:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vo.W_WORKING_FEEDBACKS">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 09 09:26:33 ICT 2012.
    -->
    update W_WORKING_FEEDBACKS
    set NGUOI_NHAN_XET = #nguoiNhanXet:VARCHAR#,
      THOI_GIAN = #thoiGian:TIMESTAMP#,
      NOI_DUNG = #noiDung:VARCHAR#,
      MODIFY_DATE = SYSDATE,
      ID_WORKS = #idWorks:DECIMAL#,
      CREATED_BY_TCP_IP = #createdByTcpIp:VARCHAR#,
      MODIFIED_BY_TCP_IP = #modifiedByTcpIp:VARCHAR#,
      ID_PROCESSES = #idProcesses:DECIMAL#
    where ID = #id:DECIMAL#
  </update>
  
  
  
  <select id="countRow" parameterClass="vo.W_WORKING_FEEDBACKS" resultClass="Integer">
    select count(*) from W_WORKING_FEEDBACKS
		  <dynamic prepend="where">
		  <isNotNull prepend="and" property="idWorks">
		        ID_WORKS = #idWorks:DECIMAL#
		      </isNotNull>
		    </dynamic>
  </select>
  
  <resultMap class="vo.W_WORKING_FEEDBACKS" id="idWorksList">
    <result column="ID" jdbcType="DECIMAL" property="id" />
  </resultMap>
<select id="idWorkingFeedbacks" parameterClass="java.lang.String" resultMap="idWorksList">
	SELECT ID FROM W_WORKING_FEEDBACKS
	<dynamic prepend="where">
		        ID_WORKS = #idWorks:VARCHAR#
	</dynamic>
	</select>
	
<!-- <select id="workingFeedbacks" parameterClass="java.lang.String" resultMap="ibatorgenerated_BaseResultMap">
	SELECT * FROM W_WORKING_FEEDBACKS
	<dynamic prepend="where">
		        ID_WORKS = #idWorks:VARCHAR#
	</dynamic>
	ORDER BY THOI_GIAN
</select> -->


<resultMap class="vo.W_WORKING_FEEDBACKS" id="resultMapGetList">
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="NGUOI_NHAN_XET" jdbcType="VARCHAR" property="nguoiNhanXet" />
    <result column="THOI_GIAN" jdbcType="TIMESTAMP" property="thoiGian" />
    <result column="NOI_DUNG" jdbcType="VARCHAR" property="noiDung" />
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="ID_WORKS" jdbcType="DECIMAL" property="idWorks" />
    <result column="CREATED_BY_TCP_IP" jdbcType="VARCHAR" property="createdByTcpIp" />
    <result column="MODIFIED_BY_TCP_IP" jdbcType="VARCHAR" property="modifiedByTcpIp" />
    <result column="ID_PROCESSES" jdbcType="DECIMAL" property="idProcesses" />
    <result column="FULLNAME" jdbcType="VARCHAR" property="fullname" />
  </resultMap>
<procedure id="getWorkingFeedbacksList" resultMap="resultMapGetList">
	      {
	      	call pk_w_working_feedbacks.GET_WORKING_FEEDBACKS_LIST
	      	(
	      		#P_ID,jdbcType=INTEGER,mode=IN,javaType=java.lang.Integer#,
	      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <select id="filter" parameterClass="vo.W_WORKING_FEEDBACKS" resultMap="resultMapGetList">
		 select wwf.*, su.fullname from W_WORKING_FEEDBACKS wwf
		 LEFT JOIN SYS_USERS su ON su.username = wwf.NGUOI_NHAN_XET
		    <dynamic prepend="where">
			    <isNotNull prepend="and" property="idWorks">
			        wwf.ID_WORKS = #idWorks:DECIMAL#
			    </isNotNull>
			    <isNotNull prepend="and" property="idProcesses">
			       wwf.ID_PROCESSES = #idProcesses:DECIMAL#
			    </isNotNull>		     
		    </dynamic>
		    order by wwf.ID
  </select>
</sqlMap>