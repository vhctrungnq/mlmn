<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="M_DEPARTMENT">
  <resultMap class="vo.MDepartment" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="ABBREVIATED" jdbcType="VARCHAR" property="abbreviated" />
    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="FAX" jdbcType="VARCHAR" property="fax" />
    <result column="ADDRESS" jdbcType="VARCHAR" property="address" />
    <result column="IS_ENABLE" jdbcType="VARCHAR" property="isEnable" />
    <result column="ORDERING" jdbcType="DECIMAL" property="ordering" />
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="SYSTEM" jdbcType="VARCHAR" property="system" />
    <result column="PARENT_ID" jdbcType="DECIMAL" property="parentId" />
    <result column="REGION" jdbcType="VARCHAR" property="region" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="vo.MDepartment" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    select DEPT_CODE, ID, ABBREVIATED, DEPT_NAME, PHONE, EMAIL, FAX, ADDRESS, IS_ENABLE, ORDERING,
      CREATED_BY, CREATE_DATE, MODIFIED_BY, MODIFY_DATE, SYSTEM, PARENT_ID,REGION
    from M_DEPARTMENT
    where UPPER(DEPT_CODE) = UPPER(#deptCode:VARCHAR#)
  </select>
	<select id="selectByID" parameterClass="vo.MDepartment" resultMap="ibatorgenerated_BaseResultMap">
		select DEPT_CODE, ID, ABBREVIATED, DEPT_NAME, PHONE, EMAIL, FAX, ADDRESS, IS_ENABLE, ORDERING,
		CREATED_BY, CREATE_DATE, MODIFIED_BY, MODIFY_DATE, SYSTEM, PARENT_ID,REGION
		from M_DEPARTMENT
		where ID = #id:DECIMAL#
	</select>

  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="vo.MDepartment">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    delete from M_DEPARTMENT
    where ID = #id:DECIMAL#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="vo.MDepartment">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    insert into M_DEPARTMENT (DEPT_CODE, ABBREVIATED, DEPT_NAME, PHONE, FAX, ADDRESS,
      IS_ENABLE, ORDERING, CREATED_BY, CREATE_DATE, SYSTEM, PARENT_ID,REGION)
    values (#deptCode:VARCHAR#, #abbreviated:VARCHAR#, #deptName:VARCHAR#,
      #phone:VARCHAR#, #fax:VARCHAR#, #address:VARCHAR#, #isEnable:VARCHAR#,
      #ordering:DECIMAL#, #createdBy:VARCHAR#, SYSDATE, #system:VARCHAR#, #parentId:DECIMAL#, #region:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vo.MDepartment">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    insert into M_DEPARTMENT
    <dynamic prepend="(">
      <isNotNull prepend="," property="deptCode">
        DEPT_CODE
      </isNotNull>
      <isNotNull prepend="," property="id">
        ID
      </isNotNull>
      <isNotNull prepend="," property="abbreviated">
        ABBREVIATED
      </isNotNull>
      <isNotNull prepend="," property="deptName">
        DEPT_NAME
      </isNotNull>
      <isNotNull prepend="," property="phone">
        PHONE
      </isNotNull>
      <isNotNull prepend="," property="email">
        EMAIL
      </isNotNull>
      <isNotNull prepend="," property="fax">
        FAX
      </isNotNull>
      <isNotNull prepend="," property="address">
        ADDRESS
      </isNotNull>
      <isNotNull prepend="," property="isEnable">
        IS_ENABLE
      </isNotNull>
      <isNotNull prepend="," property="ordering">
        ORDERING
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        CREATED_BY
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        CREATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        MODIFIED_BY
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        MODIFY_DATE
      </isNotNull>
      <isNotNull prepend="," property="system">
        SYSTEM
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        PARENT_ID
      </isNotNull>
      <isNotNull prepend="," property="region">
        REGION
      </isNotNull>
      
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="deptCode">
        #deptCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="id">
        #id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="abbreviated">
        #abbreviated:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deptName">
        #deptName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone">
        #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email">
        #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fax">
        #fax:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address">
        #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable">
        #isEnable:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ordering">
        #ordering:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="system">
        #system:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        #parentId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="region">
        #region:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="vo.MDepartment">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    update M_DEPARTMENT
    <dynamic prepend="set">
      <isNotNull prepend="," property="id">
        ID = #id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="abbreviated">
        ABBREVIATED = #abbreviated:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deptName">
        DEPT_NAME = #deptName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone">
        PHONE = #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email">
        EMAIL = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fax">
        FAX = #fax:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address">
        ADDRESS = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable">
        IS_ENABLE = #isEnable:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ordering">
        ORDERING = #ordering:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        CREATED_BY = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate">
        CREATE_DATE = #createDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        MODIFIED_BY = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate">
        MODIFY_DATE = #modifyDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="system">
        SYSTEM = #system:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        PARENT_ID = #parentId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="region">
        REGION =#region:VARCHAR#
      </isNotNull>
    </dynamic>
    where DEPT_CODE = #deptCode:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="vo.MDepartment">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Oct 25 11:19:35 ICT 2012.
    -->
    update M_DEPARTMENT
    set
      ABBREVIATED = #abbreviated:VARCHAR#,
      DEPT_NAME = #deptName:VARCHAR#,
      PHONE = #phone:VARCHAR#,
      FAX = #fax:VARCHAR#,
      ADDRESS = #address:VARCHAR#,
      IS_ENABLE = #isEnable:VARCHAR#,
      ORDERING = #ordering:DECIMAL#,
      MODIFIED_BY = #modifiedBy:VARCHAR#,
      MODIFY_DATE = SYSDATE,
      SYSTEM = #system:VARCHAR#,
      PARENT_ID = #parentId:DECIMAL#,
      REGION =#region:VARCHAR#
    where DEPT_CODE = #deptCode:VARCHAR#
  </update>
   <parameterMap class="java.util.Map" id="parameterfilter">
  	<parameter property="system" />
  	<parameter property="username" />
  </parameterMap>
   <select id="getUserList" parameterMap="parameterfilter" resultMap="ibatorgenerated_BaseResultMap">
  	SELECT DEPT_CODE As DEPT_CODE,
  	 ABBREVIATED,
  	 ID,
	DEPT_NAME,
  	 PHONE,
  	 EMAIL,
  	 FAX,
  	 ADDRESS,
  	 IS_ENABLE,
  	 ORDERING,
  	  CREATED_BY,
  	  CREATE_DATE,
  	  MODIFIED_BY,
  	 	MODIFY_DATE,
  	  SYSTEM,
  	  PARENT_ID   ,
  	  REGION                  
  	FROM M_DEPARTMENT
  	<dynamic prepend="where">
      <isNotEmpty prepend="and" property="system">
       	SYSTEM = #system:VARCHAR#
      </isNotEmpty>
    </dynamic>
    ORDER BY  UPPER(ABBREVIATED) ASC
  </select>

 <resultMap class="vo.MDepartment" id="resultMapFilter">
 	<result column="STT" jdbcType="VARCHAR" property="stt" />
    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="ABBREVIATED" jdbcType="VARCHAR" property="abbreviated" />
    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="FAX" jdbcType="VARCHAR" property="fax" />
    <result column="ADDRESS" jdbcType="VARCHAR" property="address" />
    <result column="IS_ENABLE" jdbcType="VARCHAR" property="isEnable" />
    <result column="ORDERING" jdbcType="DECIMAL" property="ordering" />
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="SYSTEM" jdbcType="VARCHAR" property="system" />
    <result column="PARENT_ID" jdbcType="DECIMAL" property="parentId" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="DEPT_VALUE" jdbcType="VARCHAR" property="deptValue" />
    <result column="REGION" jdbcType="VARCHAR" property="region" />
  </resultMap>	 
 <procedure id="getPhongBanFilter" parameterClass="java.util.Map" resultMap="resultMapFilter">
      {
	      call PK_M_DEPARTMENT.GET_PHONG_BAN_FILTER
	      (
	      	#P_DEPT_CODE,jdbcType=VARCHAR,mode=IN#,
	      	#P_ABBREVIATED,jdbcType=VARCHAR,mode=IN#,
	      	#P_DEPT_NAME,jdbcType=VARCHAR,mode=IN#,
			#P_IS_ENABLE,jdbcType=VARCHAR,mode=IN#,
			#P_COLUMN,jdbcType=VARCHAR,mode=IN#,
			#P_ORDER,jdbcType=VARCHAR,mode=IN#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		  )
      }
 </procedure>
 
 <procedure id="getDepartmentList" resultMap="ibatorgenerated_BaseResultMap">
      {
      	call PK_M_DEPARTMENT.GET_DEPARTMENT_LIST
      	(
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="getPhongBanCha" resultMap="ibatorgenerated_BaseResultMap">
	  {
      	call PK_M_DEPARTMENT.GET_PHONG_BAN_CHA
      	(
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="getDepartmentDontId" resultMap="ibatorgenerated_BaseResultMap">
	  {
      	call PK_M_DEPARTMENT.GET_DEPARTMENT_DONT_ID
      	(
      		#P_ID,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <select id="checkUserExcuteExits" parameterMap="parameterfilter" resultMap="ibatorgenerated_BaseResultMap">
  	SELECT * FROM M_DEPARTMENT
  	<dynamic prepend="where">
      <isNotEmpty prepend="and" property="system">
       	UPPER(SYSTEM) = UPPER(#system:VARCHAR#)
      </isNotEmpty>
      <isNotEmpty prepend="and" property="username">
       	UPPER(DEPT_CODE) = UPPER(#username:VARCHAR#)
      </isNotEmpty>
    </dynamic>
    ORDER BY UPPER(ABBREVIATED) ASC
  </select>
  
  <resultMap class="vo.MDepartment" id="resultMapFilterDistinct">
 	<result column="PHONG_BAN_CHA" jdbcType="VARCHAR" property="phongBanCha" />
  </resultMap>
  <procedure id="distinctNhomPhongBan" resultMap="resultMapFilterDistinct">
      {
      	call PK_M_DEPARTMENT.DISTINCT_NHOM_PHONG_BAN
      	(
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="countPhongBanCha" resultClass="Integer">
      {
      	call PK_M_DEPARTMENT.COUNT_PHONG_BAN_CHA
      	(
      		#P_ID,jdbcType=INTEGER,mode=IN,javaType=java.lang.Integer#,
	      	#P_DATA,jdbcType=INTEGER,mode=OUT,javaType=java.lang.Integer#
      	)
      }
  </procedure>
  
  <resultMap class="vo.SYS_PARAMETER" id="resultSysParameter">
    <result column="ID" jdbcType="DECIMAL" property="id" />
    <result column="CODE" jdbcType="NVARCHAR" property="code" />
    <result column="NAME" jdbcType="NVARCHAR" property="name" />
    <result column="VALUE" jdbcType="NVARCHAR" property="value" />
    <result column="ORDERING" jdbcType="DECIMAL" property="ordering" />
    <result column="DATA_TYPE" jdbcType="NVARCHAR" property="dataType" />
    <result column="CREATED_BY" jdbcType="NVARCHAR" property="createdBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="MODIFIED_BY" jdbcType="NVARCHAR" property="modifiedBy" />
    <result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="REMARK" jdbcType="NVARCHAR" property="remark" />
  </resultMap>
  
   <resultMap class="vo.MDepartment" id="result_getDepartmentOfUser">
    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
    <result column="TEAM" jdbcType="VARCHAR" property="team" />
    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
    <result column="TEAM" jdbcType="VARCHAR" property="deptValue" />
    <result column="ABBREVIATED" jdbcType="VARCHAR" property="abbreviated" />
  </resultMap>
  
  <procedure id="getSystemListBySp" resultMap="resultSysParameter">
	      {
	      	call PK_M_DEPARTMENT.GET_SYSTEM_LIST_BY_SP
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="titleDepartment" resultMap="resultSysParameter">
	      {
	      	call PK_M_DEPARTMENT.TITLE_DEPARTMENT
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getTrangThai" resultMap="resultSysParameter">
	      {
	      	call PK_M_DEPARTMENT.GET_TRANG_THAI
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
   <procedure id="getDepartmentBySys" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_M_DEPARTMENT.GET_DEPARTMENT_BY_SYS
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
   
   <procedure id="checkUserAlarmExits" resultMap="ibatorgenerated_BaseResultMap">
      {
      	call PK_M_DEPARTMENT.PR_CHECK_DEPARMENT_EXIT
      	(
      		#P_DEPARMENT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="getDepartmentByEquipment" resultMap="ibatorgenerated_BaseResultMap">
	      {
	      	call PK_ISO_INVENTORY.GET_DEPARTMENT_BY_EQUIMENT
	      	(
		      	#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
	      	)
	      }
  </procedure>
  
  <procedure id="getDepartmentForShiftList" resultMap="resultMapFilter">
      {
      	call PK_AL_MANAGE_MLMN.GET_DEPARTMENT_FOR_SHIFT_LIST
      	(
      		#P_STT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="loadTeamByDepartment" resultMap="resultMapFilter">
      {
      	call PK_AL_MANAGE_MLMN.LOAD_TEAM_BY_DEPARTMENT
      	(
      		#P_DEPARTMENT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="getVMDepartmentBacklog" resultMap="resultMapFilter">
      {
      	call PK_AL_MANAGE_MLMN.GET_V_M_DEPARTMENT_BACKLOG
      	(
      		#P_DEPT_CODE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 <procedure id="getDepartmentOfUser" resultMap="result_getDepartmentOfUser">
      {
      	call PK_M_DEPARTMENT.pr_getDepartmentOfUser
      	(
      		#P_USERNAME,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
 
 
  <procedure id="getGroupByDeptTeam" resultMap="ibatorgenerated_BaseResultMap">
      {
      	call PK_AL_MANAGE_MLMN.GET_GROUP_BY_TEAM
      	(
      		#P_DEPARTMENT,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_TEAM,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
      		#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
      	)
      }
 </procedure>
</sqlMap>