<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="V_RP_DY_IPBB_INTERNET" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbInternet" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 14 16:11:55 ICT 2013.
    -->
    <result column="DAY" property="day" jdbcType="DATE" />
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="REF_VALUE" property="refValue" jdbcType="DECIMAL" />
    <result column="DELAY_MS1_MAX" property="delayMs1Max" jdbcType="DECIMAL" />
    <result column="DELAY_MS2_MAX" property="delayMs2Max" jdbcType="DECIMAL" />
    <result column="DELAY_MS1_AVG" property="delayMs1Avg" jdbcType="DECIMAL" />
    <result column="DELAY_MS2_AVG" property="delayMs2Avg" jdbcType="DECIMAL" />
    <result column="PERFOMANCE1" property="perfomance1" jdbcType="VARCHAR" />
    <result column="PERFOMANCE2" property="perfomance2" jdbcType="VARCHAR" />
  </resultMap>
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbInternet" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 14 16:11:55 ICT 2013.
    -->
    insert into V_RP_DY_IPBB_INTERNET (DAY, DIRECTION, LINK, REF_VALUE, DELAY_MS1_MAX,
      DELAY_MS2_MAX, DELAY_MS1_AVG, DELAY_MS2_AVG, PERFOMANCE1, PERFOMANCE2)
    values (#day:DATE#, #direction:VARCHAR#, #link:VARCHAR#, #refValue:DECIMAL#,
      #delayMs1Max:DECIMAL#, #delayMs2Max:DECIMAL#, #delayMs1Avg:DECIMAL#, #delayMs2Avg:DECIMAL#,
      #perfomance1:VARCHAR#, #perfomance2:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbInternet" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Jan 14 16:11:55 ICT 2013.
    -->
    insert into V_RP_DY_IPBB_INTERNET
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        DAY
      </isNotNull>
      <isNotNull prepend="," property="direction" >
        DIRECTION
      </isNotNull>
      <isNotNull prepend="," property="link" >
        LINK
      </isNotNull>
      <isNotNull prepend="," property="refValue" >
        REF_VALUE
      </isNotNull>
      <isNotNull prepend="," property="delayMs1Max" >
        DELAY_MS1_MAX
      </isNotNull>
      <isNotNull prepend="," property="delayMs2Max" >
        DELAY_MS2_MAX
      </isNotNull>
      <isNotNull prepend="," property="delayMs1Avg" >
        DELAY_MS1_AVG
      </isNotNull>
      <isNotNull prepend="," property="delayMs2Avg" >
        DELAY_MS2_AVG
      </isNotNull>
      <isNotNull prepend="," property="perfomance1" >
        PERFOMANCE1
      </isNotNull>
      <isNotNull prepend="," property="perfomance2" >
        PERFOMANCE2
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        #day:DATE#
      </isNotNull>
      <isNotNull prepend="," property="direction" >
        #direction:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="link" >
        #link:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="refValue" >
        #refValue:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayMs1Max" >
        #delayMs1Max:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayMs2Max" >
        #delayMs2Max:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayMs1Avg" >
        #delayMs1Avg:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayMs2Avg" >
        #delayMs2Avg:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="perfomance1" >
        #perfomance1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="perfomance2" >
        #perfomance2:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  
  <parameterMap class="java.util.Map" id="filter">
   <parameter property="link"/>
    <parameter property="startDate" />
    <parameter property="endDate" />
    <parameter property="direction"/>
  </parameterMap>
  
   <select id="filter" parameterMap="filter" resultMap="ibatorgenerated_BaseResultMap">
    select * From V_RP_DY_IPBB_INTERNET
    <dynamic prepend="where">
      <isNotEmpty prepend="and" property="direction">
        DIRECTION = #direction:VARCHAR#
       </isNotEmpty>
      <isNotEmpty prepend="and" property="link">
        LINK  = #link:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
       		DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY') 
      </isNotEmpty>
      <isNotEmpty prepend="and" property="startDate">
       		DAY <![CDATA[ >=]]> to_date(#startDate#, 'DD/MM/YYYY') 
      </isNotEmpty>
    </dynamic>
	
	 Order by DAY,DIRECTION, LINK
  </select>
  
   <parameterMap class="java.util.Map" id="filter1">
    <parameter property="startDate" />
    <parameter property="endDate" />
  </parameterMap>
   <resultMap class="vn.com.vhc.vmsc2.statistics.domain.VRpDyIpbbInternet" id="daylist">
   		<result column="DAY" property="day" jdbcType="DATE" />
  </resultMap>
  <select id="filter1" parameterMap="filter1" resultMap="daylist">
    select distinct(DAY) From V_RP_DY_IPBB_INTERNET
    <dynamic prepend="where">
       <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty>
    </dynamic>
	Order by DAY
  </select>
</sqlMap>