<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="V_DY_IPBB_LINK" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vn.com.vhc.vmsc2.statistics.domain.VDyIpbbLink" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 21 09:48:55 ICT 2012.
    -->
    <result column="DAY" property="day" jdbcType="DATE" />
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
    <result column="DELAY_MAX" property="delayMax" jdbcType="DECIMAL" />
    <result column="DELAY_AVG" property="delayAvg" jdbcType="DECIMAL" />
    <result column="JITTER_AVG" property="jitterAvg" jdbcType="DECIMAL" />
    <result column="MAX_OVER_THRESHOLD_50" property="maxOverThreshold50" jdbcType="DECIMAL" />
    <result column="MAX_OVER_THRESHOLD_10" property="maxOverThreshold10" jdbcType="DECIMAL" />
    <result column="PACKET_LOSS" property="packetLoss" jdbcType="DECIMAL" />
    <result column="MOS" property="mos" jdbcType="DECIMAL" />
    <result column="LOSS_CONNECTION_DUR" property="lossConnectionDur" jdbcType="DECIMAL" />
  </resultMap>
   <resultMap id="ibatorgenerated_BaseResultMap_badlink" class="vn.com.vhc.vmsc2.statistics.domain.VDyIpbbLink" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 21 09:48:55 ICT 2012.
    -->
    <result column="DAY" property="day" jdbcType="DATE" />
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
  </resultMap>
  
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VDyIpbbLink" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 21 09:48:55 ICT 2012.
    -->
    insert into V_DY_IPBB_LINK (DAY, DIRECTION, LINK, BAND_WIDTH, IN_KBIT_SECOND, IN_UTILIZATION,
      OUT_KBIT_SECOND, OUT_UTILIZATION, DELAY_MAX, DELAY_AVG, JITTER_AVG, MAX_OVER_THRESHOLD_50,
      MAX_OVER_THRESHOLD_10, PACKET_LOSS, MOS, LOSS_CONNECTION_DUR)
    values (#day:DATE#, #direction:VARCHAR#, #link:VARCHAR#, #bandWidth:DECIMAL#,
      #inKbitSecond:DECIMAL#, #inUtilization:DECIMAL#, #outKbitSecond:DECIMAL#,
      #outUtilization:DECIMAL#, #delayMax:DECIMAL#, #delayAvg:DECIMAL#, #jitterAvg:DECIMAL#,
      #maxOverThreshold50:DECIMAL#, #maxOverThreshold10:DECIMAL#, #packetLoss:DECIMAL#,
      #mos:DECIMAL#, #lossConnectionDur:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VDyIpbbLink" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 21 09:48:55 ICT 2012.
    -->
    insert into V_DY_IPBB_LINK
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        DAY
      </isNotNull>
      <isNotNull prepend="," property="direction" >
        DIRECTION
      </isNotNull>
      <isNotNull prepend="," property="link" >
        LINK
      </isNotNull>
      <isNotNull prepend="," property="bandWidth" >
        BAND_WIDTH
      </isNotNull>
      <isNotNull prepend="," property="inKbitSecond" >
        IN_KBIT_SECOND
      </isNotNull>
      <isNotNull prepend="," property="inUtilization" >
        IN_UTILIZATION
      </isNotNull>
      <isNotNull prepend="," property="outKbitSecond" >
        OUT_KBIT_SECOND
      </isNotNull>
      <isNotNull prepend="," property="outUtilization" >
        OUT_UTILIZATION
      </isNotNull>
      <isNotNull prepend="," property="delayMax" >
        DELAY_MAX
      </isNotNull>
      <isNotNull prepend="," property="delayAvg" >
        DELAY_AVG
      </isNotNull>
      <isNotNull prepend="," property="jitterAvg" >
        JITTER_AVG
      </isNotNull>
      <isNotNull prepend="," property="maxOverThreshold50" >
        MAX_OVER_THRESHOLD_50
      </isNotNull>
      <isNotNull prepend="," property="maxOverThreshold10" >
        MAX_OVER_THRESHOLD_10
      </isNotNull>
      <isNotNull prepend="," property="packetLoss" >
        PACKET_LOSS
      </isNotNull>
      <isNotNull prepend="," property="mos" >
        MOS
      </isNotNull>
      <isNotNull prepend="," property="lossConnectionDur" >
        LOSS_CONNECTION_DUR
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        #day:DATE#
      </isNotNull>
      <isNotNull prepend="," property="direction" >
        #direction:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="link" >
        #link:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bandWidth" >
        #bandWidth:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="inKbitSecond" >
        #inKbitSecond:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="inUtilization" >
        #inUtilization:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="outKbitSecond" >
        #outKbitSecond:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="outUtilization" >
        #outUtilization:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayMax" >
        #delayMax:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="delayAvg" >
        #delayAvg:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="jitterAvg" >
        #jitterAvg:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="maxOverThreshold50" >
        #maxOverThreshold50:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="maxOverThreshold10" >
        #maxOverThreshold10:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="packetLoss" >
        #packetLoss:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="mos" >
        #mos:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="lossConnectionDur" >
        #lossConnectionDur:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  
  <parameterMap class="java.util.Map" id="filter">
    <parameter property="direction"/>
    <parameter property="link"/>
    <parameter property="startDate" />
    <parameter property="endDate" />
  </parameterMap>
  
   <select id="filter" parameterMap="filter" resultMap="ibatorgenerated_BaseResultMap">
    select * From V_DY_IPBB_LINK
     <dynamic prepend="where">
      <isNotEmpty prepend="and" property="direction">
        DIRECTION = #direction:VARCHAR#
       </isNotEmpty>
      <isNotEmpty prepend="and" property="link">
        LINK  = #link:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty>
       
    </dynamic>
	Order by DAY,DIRECTION, LINK
  </select>
  
  <procedure id="filterBadLink" resultMap="ibatorgenerated_BaseResultMap_badlink">
		{
			call PK_RP_IPBB.pr_filterBadLink
			(
				#P_DIRECTION,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_LINK,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_START_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_END_DATE,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
				#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
			)
		}
  </procedure>
  
  <resultMap id="baseResultMap_week" class="vn.com.vhc.vmsc2.statistics.domain.IPBBLinkTruyenDan" >
    <result column="WEEK" property="week" jdbcType="DECIMAL" />
    <result column="YEAR" property="year" jdbcType="DECIMAL" /> 
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
  </resultMap>
  <procedure id="filterWeek" resultMap="baseResultMap_week">
	{
		call PK_RP_IPBB.get_week_ipbb_link
		(
			#startYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#startWeek,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endWeek,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#link,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#direction,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		)
	}
  </procedure>
  
  <resultMap id="baseResultMap_month" class="vn.com.vhc.vmsc2.statistics.domain.IPBBLinkTruyenDan" >
    <result column="MONTH" property="month" jdbcType="DECIMAL" />
    <result column="YEAR" property="year" jdbcType="DECIMAL" /> 
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
  </resultMap>
  <procedure id="filterMonth" resultMap="baseResultMap_month">
	{
		call PK_RP_IPBB.get_month_ipbb_link
		(
			#startYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#startMonth,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endMonth,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#link,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#direction,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		)
	}
  </procedure>
  
  <resultMap id="baseResultMap_quarter" class="vn.com.vhc.vmsc2.statistics.domain.IPBBLinkTruyenDan" >
    <result column="QUARTER" property="quarter" jdbcType="DECIMAL" />
    <result column="YEAR" property="year" jdbcType="DECIMAL" /> 
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
  </resultMap>
  <procedure id="filterQuarter" resultMap="baseResultMap_quarter">
	{
		call PK_RP_IPBB.get_quarter_ipbb_link
		(
			#startYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#startQuarter,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endQuarter,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#link,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#direction,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		)
	}
  </procedure>

  <resultMap id="baseResultMap_year" class="vn.com.vhc.vmsc2.statistics.domain.IPBBLinkTruyenDan" > 
    <result column="YEAR" property="year" jdbcType="DECIMAL" /> 
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
  </resultMap>
  <procedure id="filterYear" resultMap="baseResultMap_year">
	{
		call PK_RP_IPBB.get_year_ipbb_link
		(
			#startYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#,
			#endYear,jdbcType=NUMBER,mode=IN,javaType=java.lang.Integer#, 
			#link,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#direction,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		)
	}
  </procedure>
  
  <resultMap id="baseResultMap_option" class="vn.com.vhc.vmsc2.statistics.domain.VDyIpbbLink" >  
    <result column="DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="LINK" property="link" jdbcType="VARCHAR" />
    <result column="BAND_WIDTH" property="bandWidth" jdbcType="DECIMAL" />
    <result column="IN_KBIT_SECOND" property="inKbitSecond" jdbcType="DECIMAL" />
    <result column="IN_UTILIZATION" property="inUtilization" jdbcType="DECIMAL" />
    <result column="OUT_KBIT_SECOND" property="outKbitSecond" jdbcType="DECIMAL" />
    <result column="OUT_UTILIZATION" property="outUtilization" jdbcType="DECIMAL" />
    <result column="DELAY_MAX" property="delayMax" jdbcType="DECIMAL" />
    <result column="DELAY_AVG" property="delayAvg" jdbcType="DECIMAL" />
    <result column="JITTER_AVG" property="jitterAvg" jdbcType="DECIMAL" />
    <result column="MAX_OVER_THRESHOLD_50" property="maxOverThreshold50" jdbcType="DECIMAL" />
    <result column="MAX_OVER_THRESHOLD_10" property="maxOverThreshold10" jdbcType="DECIMAL" />
    <result column="PACKET_LOSS" property="packetLoss" jdbcType="DECIMAL" />
    <result column="MOS" property="mos" jdbcType="DECIMAL" />
    <result column="LOSS_CONNECTION_DUR" property="lossConnectionDur" jdbcType="DECIMAL" />
  </resultMap>
  <procedure id="filterOption" resultMap="baseResultMap_option">
	{
		call pk_rp_option_core.get_option_ipbb_link
		(
			#startTime,jdbcType=NUMBER,mode=IN,javaType=java.lang.String#,
			#endTime,jdbcType=NUMBER,mode=IN,javaType=java.lang.String#, 
			#link,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#direction,jdbcType=VARCHAR,mode=IN,javaType=java.lang.String#,
			#P_DATA,jdbcType=ORACLECURSOR,mode=OUT,javaType=java.sql.ResultSet#
		)
	}
  </procedure>
</sqlMap>