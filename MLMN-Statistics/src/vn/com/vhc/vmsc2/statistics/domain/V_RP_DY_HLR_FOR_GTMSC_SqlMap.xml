<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="V_RP_DY_HLR_FOR_GTMSC" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="vn.com.vhc.vmsc2.statistics.domain.VRpDyHlrForGtmsc" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 10 13:41:12 ICT 2013.
    -->
    <result column="DAY" property="day" jdbcType="TIMESTAMP" />
    <result column="NODEID" property="nodeid" jdbcType="VARCHAR" />
    <result column="SEIZURE_TRAFFIC" property="seizureTraffic" jdbcType="DECIMAL" />
    <result column="AVERAGE_SEIZURE_RATE" property="averageSeizureRate" jdbcType="DECIMAL" />
    <result column="IP_FLOW" property="ipFlow" jdbcType="DECIMAL" />
  </resultMap>
  <insert id="ibatorgenerated_insert" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyHlrForGtmsc" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 10 13:41:12 ICT 2013.
    -->
    insert into V_RP_DY_HLR_FOR_GTMSC (DAY, NODEID, SEIZURE_TRAFFIC, AVERAGE_SEIZURE_RATE, IP_FLOW)
    values (#day:TIMESTAMP#, #nodeid:VARCHAR#, #seizureTraffic:DECIMAL#,
      #averageSeizureRate:DECIMAL#, #ipFlow:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="vn.com.vhc.vmsc2.statistics.domain.VRpDyHlrForGtmsc" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 10 13:41:12 ICT 2013.
    -->
    insert into V_RP_DY_HLR_FOR_GTMSC
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        DAY
      </isNotNull>
      <isNotNull prepend="," property="nodeid" >
        NODEID
      </isNotNull>
      <isNotNull prepend="," property="seizureTraffic" >
        SEIZURE_TRAFFIC
      </isNotNull>
      <isNotNull prepend="," property="averageSeizureRate" >
        AVERAGE_SEIZURE_RATE
      </isNotNull>
      <isNotNull prepend="," property="ipFlow" >
        IP_FLOW
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="day" >
        #day:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="nodeid" >
        #nodeid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="seizureTraffic" >
        #seizureTraffic:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="averageSeizureRate" >
        #averageSeizureRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="ipFlow" >
        #ipFlow:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
   <parameterMap id="filter" class="java.util.Map">
    <parameter property="startDate"/>
    <parameter property="endDate"/>
    <parameter property="nodeid" />
  </parameterMap>
  <select id="filter" resultMap="ibatorgenerated_BaseResultMap" parameterMap="filter">
    select *
    from V_RP_DY_HLR_FOR_GTMSC
    <dynamic prepend="where" >
      <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="nodeid">
        NODEID like '%' || UPPER(#nodeid:VARCHAR#) || '%'
      </isNotEmpty>
    </dynamic>
    order by NODEID, DAY asc
    </select>
    <parameterMap class="java.util.Map" id="filter1">
    <parameter property="startDate" />
    <parameter property="endDate" />
  </parameterMap>
   <resultMap class="vn.com.vhc.vmsc2.statistics.domain.VRpDyHlrForGtmsc" id="daylist">
   		<result column="DAY" property="day" jdbcType="DATE" />
  </resultMap>
  <select id="filterDay" parameterMap="filter1" resultMap="daylist">
    select distinct(DAY) From V_RP_DY_HLR_FOR_GTMSC
    <dynamic prepend="where">
       <isNotEmpty prepend="and" property="startDate">
        DAY <![CDATA[ >= ]]> to_date(#startDate#, 'DD/MM/YYYY')
      </isNotEmpty>
      <isNotEmpty prepend="and" property="endDate">
        DAY <![CDATA[ <= ]]> to_date(#endDate#, 'DD/MM/YYYY')
      </isNotEmpty>
    </dynamic>
	Order by DAY
  </select>
</sqlMap>